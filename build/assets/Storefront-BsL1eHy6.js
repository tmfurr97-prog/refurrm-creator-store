import{r as i,j as e,a1 as y,a2 as L,a3 as z,a4 as T,a5 as _,X as v,p as $,a6 as M}from"./react-vendor-zXfd7Ve7.js";import{f as D,I as E,B as b,s as w}from"./index-D8webL0o.js";import{S as I,a as V,b as H,c as R,d as f}from"./select-BG5THQer.js";import{B as N}from"./badge-C_-9dwWz.js";import{P as q}from"./ProductCard-BLzatKXe.js";import"./vendor-BOHFvtXa.js";import"./ui-vendor-BrpyYz2q.js";import"./supabase-CH0YqYdn.js";const C=i.forwardRef(({className:l,...n},t)=>e.jsxs(y,{ref:t,className:D("relative flex w-full touch-none select-none items-center",l),...n,children:[e.jsx(L,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-secondary/50",children:e.jsx(z,{className:"absolute h-full bg-primary"})}),e.jsx(T,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow-sm ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:border-primary hover:scale-110"})]}));C.displayName=y.displayName;function O({searchQuery:l,onSearchChange:n,selectedCategory:t,onCategoryChange:p,priceRange:c,onPriceRangeChange:x,sortBy:o,onSortChange:h,categories:d,maxPrice:u}){return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(E,{type:"text",placeholder:"Search products...",value:l,onChange:r=>n(r.target.value),className:"pl-10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Category"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(b,{variant:t==="all"?"default":"outline",size:"sm",onClick:()=>p("all"),children:"All"}),d.map(r=>e.jsx(b,{variant:t===r?"default":"outline",size:"sm",onClick:()=>p(r),children:r},r))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Price Range: $",c[0]," - $",c[1]]}),e.jsx(C,{min:0,max:u,step:10,value:c,onValueChange:r=>x(r),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sort By"}),e.jsxs(I,{value:o,onValueChange:h,children:[e.jsx(V,{children:e.jsx(H,{})}),e.jsxs(R,{children:[e.jsx(f,{value:"newest",children:"Newest First"}),e.jsx(f,{value:"price-low",children:"Price: Low to High"}),e.jsx(f,{value:"price-high",children:"Price: High to Low"}),e.jsx(f,{value:"name-az",children:"Name: A to Z"})]})]})]})]})}function X({searchQuery:l,selectedCategory:n,priceRange:t,sortBy:p,maxPrice:c,onClearSearch:x,onClearCategory:o,onClearPriceRange:h,onClearAll:d}){return l||n!=="all"||t[0]!==0||t[1]!==c?e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Active Filters"}),e.jsx(b,{variant:"ghost",size:"sm",onClick:d,children:"Clear All"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[l&&e.jsxs(N,{variant:"secondary",className:"flex items-center gap-1",children:["Search: ",l,e.jsx(v,{className:"w-3 h-3 cursor-pointer",onClick:x})]}),n!=="all"&&e.jsxs(N,{variant:"secondary",className:"flex items-center gap-1",children:["Category: ",n,e.jsx(v,{className:"w-3 h-3 cursor-pointer",onClick:o})]}),(t[0]!==0||t[1]!==c)&&e.jsxs(N,{variant:"secondary",className:"flex items-center gap-1",children:["Price: $",t[0]," - $",t[1],e.jsx(v,{className:"w-3 h-3 cursor-pointer",onClick:h})]})]})]}):null}function ee(){const[l,n]=i.useState([]),[t,p]=i.useState([]),[c,x]=i.useState(""),[o,h]=i.useState("all"),[d,u]=i.useState([0,1e3]),[r,S]=i.useState("newest"),[g,k]=i.useState(1e3);i.useEffect(()=>{A(),P()},[]);const P=async()=>{const{data:s}=await w.from("collections").select("*, collection_products(count)").limit(6);s&&p(s)},A=async()=>{const{data:s}=await w.from("products").select("*").order("created_at",{ascending:!1});if(s){n(s);const a=Math.max(...s.map(m=>m.price),1e3);k(a),u([0,a])}},B=i.useMemo(()=>Array.from(new Set(l.map(s=>s.category))),[l]),j=i.useMemo(()=>{let s=[...l];if(c){const a=c.toLowerCase();s=s.filter(m=>m.name.toLowerCase().includes(a)||m.description.toLowerCase().includes(a))}return o!=="all"&&(s=s.filter(a=>a.category===o)),s=s.filter(a=>a.price>=d[0]&&a.price<=d[1]),s.sort((a,m)=>{switch(r){case"price-low":return a.price-m.price;case"price-high":return m.price-a.price;case"name-az":return a.name.localeCompare(m.name);case"newest":default:return new Date(m.created_at).getTime()-new Date(a.created_at).getTime()}}),s},[l,c,o,d,r]),F=()=>{x(""),h("all"),u([0,g])};return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Our Store"}),e.jsx("p",{className:"text-gray-600",children:"Discover amazing products"})]}),t.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Featured Collections"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map(s=>e.jsxs($,{to:`/collection/${s.slug}`,className:"bg-white rounded-lg p-6 shadow hover:shadow-lg transition",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(M,{className:"w-6 h-6 text-purple-600"}),e.jsx("h3",{className:"text-xl font-semibold",children:s.name})]}),e.jsx("p",{className:"text-slate-600 text-sm mb-2",children:s.description}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.collection_products?.[0]?.count||0," products"]})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(O,{searchQuery:c,onSearchChange:x,selectedCategory:o,onCategoryChange:h,priceRange:d,onPriceRangeChange:u,sortBy:r,onSortChange:S,categories:B,maxPrice:g})}),e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsx(X,{searchQuery:c,selectedCategory:o,priceRange:d,sortBy:r,maxPrice:g,onClearSearch:()=>x(""),onClearCategory:()=>h("all"),onClearPriceRange:()=>u([0,g]),onClearAll:F}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",j.length," of ",l.length," products"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(s=>e.jsx(q,{product:s},s.id))}),j.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No products found"})})]})]})]})})}export{ee as default};
//# sourceMappingURL=Storefront-BsL1eHy6.js.map
