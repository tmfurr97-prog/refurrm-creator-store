import{r as i,j as e,Q as g,a7 as v,a8 as N}from"./react-vendor-zXfd7Ve7.js";import{u as _,s as n,C as k,B as d}from"./index-k1V3dZSG.js";import{B as p}from"./badge-wcb6nnAT.js";import"./vendor-BOHFvtXa.js";import"./ui-vendor-BrpyYz2q.js";import"./supabase-CH0YqYdn.js";function T(){const[r,m]=i.useState([]),[u,x]=i.useState(!0),{toast:f}=_();i.useEffect(()=>{c()},[]);const c=async()=>{const{data:{user:t}}=await n.auth.getUser();if(!t)return;const{data:s,error:a}=await n.from("products").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});!a&&s&&m(s),x(!1)},l=async(t,s)=>{const a=r.find(y=>y.id===t);if(!a)return;const o=Math.max(0,a.stock_quantity+s),{error:j}=await n.from("products").update({stock_quantity:o}).eq("id",t);j||(await n.from("inventory_history").insert({product_id:t,user_id:(await n.auth.getUser()).data.user?.id,change_type:s>0?"increase":"decrease",quantity_change:s,previous_quantity:a.stock_quantity,new_quantity:o,notes:"Manual adjustment"}),f({title:"Stock updated successfully"}),c())},h=t=>t.track_inventory?t.stock_quantity===0?{label:"Out of Stock",variant:"destructive"}:t.stock_quantity<=t.low_stock_threshold?{label:"Low Stock",variant:"warning"}:{label:"In Stock",variant:"default"}:{label:"Not Tracked",variant:"secondary"};return u?e.jsx("div",{className:"p-8",children:"Loading..."}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Inventory Management"})}),e.jsx("div",{className:"grid gap-4",children:r.map(t=>{const s=h(t);return e.jsx(k,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[t.image_url?e.jsx("img",{src:t.image_url,alt:t.name,className:"w-16 h-16 object-cover rounded"}):e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:e.jsx(g,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["$",t.price]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Current Stock"}),e.jsx("p",{className:"text-2xl font-bold",children:t.stock_quantity||0})]}),e.jsx(p,{variant:s.variant,children:s.label}),t.track_inventory&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{size:"sm",variant:"outline",onClick:()=>l(t.id,-1),children:e.jsx(v,{className:"w-4 h-4"})}),e.jsx(d,{size:"sm",variant:"outline",onClick:()=>l(t.id,1),children:e.jsx(N,{className:"w-4 h-4"})})]})]})]})},t.id)})})]})}export{T as default};
//# sourceMappingURL=Inventory-Diua6K8W.js.map
