import{r as n}from"./react-vendor-zXfd7Ve7.js";import{h as d,s as m}from"./index-k1V3dZSG.js";function _(){const{user:i,testMode:u}=d(),[t,c]=n.useState([]),[p,o]=n.useState(!0);n.useEffect(()=>{if(!i){c([]),o(!1);return}if(u){o(!1);return}a()},[i,u]);const a=async()=>{if(!i)return;const{data:s,error:e}=await m.from("subscriptions").select("*").eq("user_id",i.id).in("status",["active","past_due"]);!e&&s&&c(s),o(!1)},f=s=>{if(u||t.some(r=>r.is_vip))return!0;const e=["active","past_due"];return s?t.some(r=>r.product_id===s&&e.includes(r.status)):t.some(r=>e.includes(r.status))};return{subscriptions:t,loading:p,hasActiveSubscription:f,hasAccessToProduct:s=>u||t.some(e=>e.is_vip)?!0:f(s),isVip:()=>t.some(s=>s.is_vip),refetch:a}}export{_ as u};
//# sourceMappingURL=useSubscription--HzpgKEz.js.map
