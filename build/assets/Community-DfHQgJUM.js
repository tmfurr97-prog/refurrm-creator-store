import{r as a,j as s,bV as v,M as N}from"./react-vendor-zXfd7Ve7.js";import{h as g,s as l,b as i,C as m,a as d,c as o,I as b,B as r,k as C,l as w,m as y}from"./index-k1V3dZSG.js";import{D as _}from"./DashboardNav-dXlKSIlC.js";import"./vendor-BOHFvtXa.js";import"./ui-vendor-BrpyYz2q.js";import"./supabase-CH0YqYdn.js";function I(){const{user:x}=g(),[h,u]=a.useState([]),[t,n]=a.useState(""),[j,p]=a.useState(!0);a.useEffect(()=>{c()},[]);const c=async()=>{const{data:e}=await l.from("community_posts").select("*, user:user_profiles(username, avatar_url)").order("created_at",{ascending:!1});u(e||[]),p(!1)},f=async()=>{t.trim()&&(await l.from("community_posts").insert({content:t,user_id:x?.id}),n(""),c())};return s.jsxs("div",{className:"flex min-h-screen bg-slate-50",children:[s.jsx(_,{}),s.jsx("div",{className:"flex-1 p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx(i,{className:"text-3xl mb-8",children:"Community Feed"}),s.jsxs(m,{className:"mb-8",children:[s.jsx(d,{children:s.jsx(i,{children:"Create a Post"})}),s.jsx(o,{children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx(b,{value:t,onChange:e=>n(e.target.value),placeholder:"What's on your mind?"}),s.jsx(r,{onClick:f,children:"Post"})]})})]}),j?s.jsx("p",{children:"Loading posts..."}):s.jsx("div",{className:"space-y-6",children:h.map(e=>s.jsxs(m,{children:[s.jsx(d,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(C,{children:[s.jsx(w,{src:e.user.avatar_url}),s.jsx(y,{children:e.user.username.charAt(0)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:e.user.username}),s.jsx("p",{className:"text-sm text-slate-500",children:new Date(e.created_at).toLocaleString()})]})]})}),s.jsxs(o,{children:[s.jsx("p",{className:"mb-4",children:e.content}),s.jsxs("div",{className:"flex items-center gap-4 text-slate-500",children:[s.jsxs(r,{variant:"ghost",size:"sm",className:"flex items-center gap-1",children:[s.jsx(v,{className:"w-4 h-4"}),e.likes||0]}),s.jsxs(r,{variant:"ghost",size:"sm",className:"flex items-center gap-1",children:[s.jsx(N,{className:"w-4 h-4"}),e.comments||0]})]})]})]},e.id))})]})})]})}export{I as default};
//# sourceMappingURL=Community-DfHQgJUM.js.map
