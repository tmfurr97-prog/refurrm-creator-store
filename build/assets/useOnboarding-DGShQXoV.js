import{r as a}from"./react-vendor-zXfd7Ve7.js";import{h as c,s as t}from"./index-D8webL0o.js";const b=()=>{const{user:e}=c(),[n,d]=a.useState(null),[i,p]=a.useState(!0),o=async()=>{if(!e)return;const{data:r,error:s}=await t.from("user_profiles").select("onboarding_step, onboarding_completed").eq("id",e.id).single();s?console.error("Error fetching onboarding:",s):r&&d({current_step:r.onboarding_step||0,completed_steps:[],skipped_steps:[],is_completed:r.onboarding_completed||!1}),p(!1)};return a.useEffect(()=>{o()},[e]),{progress:n,loading:i,startOnboarding:async()=>{if(!e)return;const{error:r}=await t.from("user_profiles").update({onboarding_step:1}).eq("id",e.id);r||o()},updateStep:async r=>{if(!e)return;const{error:s}=await t.from("user_profiles").update({onboarding_step:r}).eq("id",e.id);s||o()},completeOnboarding:async()=>{if(!e)return;const{error:r}=await t.from("user_profiles").update({onboarding_completed:!0,onboarding_step:5}).eq("id",e.id);r||o()},needsOnboarding:!i&&e&&n&&!n.is_completed}};export{b as u};
//# sourceMappingURL=useOnboarding-DGShQXoV.js.map
