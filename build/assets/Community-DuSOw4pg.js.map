{"version":3,"file":"Community-DuSOw4pg.js","sources":["../../src/pages/Community.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { useAuth } from '@/contexts/AuthContext';\nimport DashboardNav from '@/components/DashboardNav';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { ThumbsUp, MessageSquare } from 'lucide-react';\n\nexport default function Community() {\n  const { user } = useAuth();\n  const [posts, setPosts] = useState<any[]>([]);\n  const [newPost, setNewPost] = useState('');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadPosts();\n  }, []);\n\n  const loadPosts = async () => {\n    const { data } = await supabase\n      .from('community_posts')\n      .select('*, user:user_profiles(username, avatar_url)')\n      .order('created_at', { ascending: false });\n\n    setPosts(data || []);\n    setLoading(false);\n  };\n\n  const createPost = async () => {\n    if (!newPost.trim()) return;\n\n    await supabase.from('community_posts').insert({\n      content: newPost,\n      user_id: user?.id,\n    });\n\n    setNewPost('');\n    loadPosts();\n  };\n\n  return (\n    <div className=\"flex min-h-screen bg-slate-50\">\n      <DashboardNav />\n      \n      <div className=\"flex-1 p-8\">\n        <div className=\"max-w-4xl mx-auto\">\n          <CardTitle className=\"text-3xl mb-8\">Community Feed</CardTitle>\n\n          <Card className=\"mb-8\">\n            <CardHeader>\n              <CardTitle>Create a Post</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex gap-4\">\n                <Input\n                  value={newPost}\n                  onChange={(e) => setNewPost(e.target.value)}\n                  placeholder=\"What's on your mind?\"\n                />\n                <Button onClick={createPost}>Post</Button>\n              </div>\n            </CardContent>\n          </Card>\n\n          {loading ? (\n            <p>Loading posts...</p>\n          ) : (\n            <div className=\"space-y-6\">\n              {posts.map(post => (\n                <Card key={post.id}>\n                  <CardHeader>\n                    <div className=\"flex items-center gap-3\">\n                      <Avatar>\n                        <AvatarImage src={post.user.avatar_url} />\n                        <AvatarFallback>{post.user.username.charAt(0)}</AvatarFallback>\n                      </Avatar>\n                      <div>\n                        <p className=\"font-bold\">{post.user.username}</p>\n                        <p className=\"text-sm text-slate-500\">\n                          {new Date(post.created_at).toLocaleString()}\n                        </p>\n                      </div>\n                    </div>\n                  </CardHeader>\n                  <CardContent>\n                    <p className=\"mb-4\">{post.content}</p>\n                    <div className=\"flex items-center gap-4 text-slate-500\">\n                      <Button variant=\"ghost\" size=\"sm\" className=\"flex items-center gap-1\">\n                        <ThumbsUp className=\"w-4 h-4\" />\n                        {post.likes || 0}\n                      </Button>\n                      <Button variant=\"ghost\" size=\"sm\" className=\"flex items-center gap-1\">\n                        <MessageSquare className=\"w-4 h-4\" />\n                        {post.comments || 0}\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["Community","user","useAuth","posts","setPosts","useState","newPost","setNewPost","loading","setLoading","useEffect","loadPosts","data","supabase","createPost","jsxs","jsx","DashboardNav","CardTitle","Card","CardHeader","CardContent","Input","Button","post","Avatar","AvatarImage","AvatarFallback","ThumbsUp","MessageSquare"],"mappings":"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"}