import{r as p,j as e}from"./react-vendor-zXfd7Ve7.js";import{p as a,h as N,B as b,C as c,a as n,b as i,c as l,s as y}from"./index-k1V3dZSG.js";import{B as m}from"./badge-wcb6nnAT.js";import"./vendor-BOHFvtXa.js";import"./ui-vendor-BrpyYz2q.js";import"./supabase-CH0YqYdn.js";function v(r){p.useEffect(()=>{const s=performance.now();return()=>{const d=performance.now()-s;a.logMetric({type:"page-load",name:r,duration:d})}},[r])}function P(){v("health-page");const{user:r}=N(),[s,d]=p.useState({connection:"checking",tables:[],auth:"checking",errors:[]}),u=async()=>{const t=[];let o="disconnected",j=[];try{const{data:f,error:g}=await y.from("products").select("count");g?t.push(`Products table: ${g.message}`):o="connected";const C=["products","orders","subscriptions","affiliates","profiles"];for(const h of C)try{const{error:x}=await y.from(h).select("*").limit(1);x||j.push(h)}catch(x){t.push(`${h}: ${x}`)}}catch(f){t.push(`Connection error: ${f.message}`)}d({connection:o,tables:j,auth:r?"authenticated":"anonymous",errors:t,supabaseUrl:"https://msaadrpyttiiejglqbbj.supabase.co",timestamp:new Date().toISOString()})};return p.useEffect(()=>{u()},[r]),e.jsxs("div",{className:"container mx-auto p-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"System Health Check"}),e.jsx(b,{onClick:u,children:"Refresh"})]}),e.jsxs(c,{children:[e.jsx(n,{children:e.jsx(i,{children:"Connection Status"})}),e.jsxs(l,{children:[e.jsx(m,{variant:s.connection==="connected"?"default":"destructive",children:s.connection}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["URL: ",s.supabaseUrl]})]})]}),e.jsxs(c,{children:[e.jsx(n,{children:e.jsx(i,{children:"Authentication"})}),e.jsxs(l,{children:[e.jsx(m,{children:s.auth}),r&&e.jsxs("p",{className:"mt-2 text-sm",children:["User ID: ",r.id]})]})]}),e.jsxs(c,{children:[e.jsx(n,{children:e.jsxs(i,{children:["Available Tables (",s.tables.length,")"]})}),e.jsx(l,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tables.map(t=>e.jsx(m,{variant:"outline",children:t},t))})})]}),s.errors.length>0&&e.jsxs(c,{className:"border-red-500",children:[e.jsx(n,{children:e.jsxs(i,{className:"text-red-600",children:["Errors (",s.errors.length,")"]})}),e.jsx(l,{children:e.jsx("ul",{className:"space-y-1 text-sm",children:s.errors.map((t,o)=>e.jsx("li",{className:"text-red-600",children:t},o))})})]}),e.jsxs(c,{children:[e.jsx(n,{children:e.jsx(i,{children:"Performance Metrics"})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["Total metrics tracked: ",a.getMetrics().length]}),e.jsxs("p",{children:["API calls: ",a.getMetricsByType("api-call").length]}),e.jsxs("p",{children:["Errors: ",a.getMetricsByType("error").length]}),e.jsxs("p",{children:["Page loads: ",a.getMetricsByType("page-load").length]}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>{a.clearMetrics(),alert("Performance metrics cleared")},className:"mt-2",children:"Clear Metrics"})]})})]})]})}export{P as default};
//# sourceMappingURL=Health-C8b_PBRB.js.map
