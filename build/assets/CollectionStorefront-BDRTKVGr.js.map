{"version":3,"file":"CollectionStorefront-BDRTKVGr.js","sources":["../../src/pages/CollectionStorefront.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { supabase } from '@/lib/supabase';\nimport ProductCard from '@/components/ProductCard';\nimport { ChevronRight } from 'lucide-react';\n\nexport default function CollectionStorefront() {\n  const { slug } = useParams();\n  const [collection, setCollection] = useState<any>(null);\n  const [products, setProducts] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadCollection();\n  }, [slug]);\n\n  const loadCollection = async () => {\n    const { data: collectionData } = await supabase\n      .from('collections')\n      .select('*')\n      .eq('slug', slug)\n      .single();\n\n    if (collectionData) {\n      setCollection(collectionData);\n\n      const { data: collectionProducts } = await supabase\n        .from('collection_products')\n        .select('product_id')\n        .eq('collection_id', collectionData.id);\n\n      const productIds = collectionProducts?.map(cp => cp.product_id) || [];\n\n      if (productIds.length > 0) {\n        const { data: productsData } = await supabase\n          .from('products')\n          .select('*')\n          .in('id', productIds);\n\n        setProducts(productsData || []);\n      }\n    }\n\n    setLoading(false);\n  };\n\n  if (loading) {\n    return <div className=\"min-h-screen flex items-center justify-center\">Loading...</div>;\n  }\n\n  if (!collection) {\n    return <div className=\"min-h-screen flex items-center justify-center\">Collection not found</div>;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-slate-50\">\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\n        <div className=\"flex items-center gap-2 text-sm text-slate-600 mb-6\">\n          <Link to=\"/storefront\" className=\"hover:text-pale skin-600\">Home</Link>\n          <ChevronRight className=\"w-4 h-4\" />\n          <span className=\"text-slate-900\">{collection.name}</span>\n        </div>\n\n        <div className=\"mb-8\">\n          <h1 className=\"text-4xl font-bold text-slate-900 mb-4\">{collection.name}</h1>\n          <p className=\"text-lg text-slate-600\">{collection.description}</p>\n          <p className=\"text-sm text-slate-500 mt-2\">{products.length} products</p>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n          {products.map(product => (\n            <ProductCard key={product.id} product={product} />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["CollectionStorefront","slug","useParams","collection","setCollection","useState","products","setProducts","loading","setLoading","useEffect","loadCollection","collectionData","supabase","collectionProducts","productIds","cp","productsData","jsx","jsxs","Link","ChevronRight","product","ProductCard"],"mappings":"2RAMA,SAAwBA,GAAuB,CAC7C,KAAM,CAAE,KAAAC,CAAA,EAASC,EAAA,EACX,CAACC,EAAYC,CAAa,EAAIC,EAAAA,SAAc,IAAI,EAChD,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAgB,CAAA,CAAE,EAC5C,CAACG,EAASC,CAAU,EAAIJ,EAAAA,SAAS,EAAI,EAE3CK,EAAAA,UAAU,IAAM,CACdC,EAAA,CACF,EAAG,CAACV,CAAI,CAAC,EAET,MAAMU,EAAiB,SAAY,CACjC,KAAM,CAAE,KAAMC,CAAA,EAAmB,MAAMC,EACpC,KAAK,aAAa,EAClB,OAAO,GAAG,EACV,GAAG,OAAQZ,CAAI,EACf,OAAA,EAEH,GAAIW,EAAgB,CAClBR,EAAcQ,CAAc,EAE5B,KAAM,CAAE,KAAME,CAAA,EAAuB,MAAMD,EACxC,KAAK,qBAAqB,EAC1B,OAAO,YAAY,EACnB,GAAG,gBAAiBD,EAAe,EAAE,EAElCG,EAAaD,GAAoB,OAAUE,EAAG,UAAU,GAAK,CAAA,EAEnE,GAAID,EAAW,OAAS,EAAG,CACzB,KAAM,CAAE,KAAME,GAAiB,MAAMJ,EAClC,KAAK,UAAU,EACf,OAAO,GAAG,EACV,GAAG,KAAME,CAAU,EAEtBR,EAAYU,GAAgB,EAAE,CAChC,CACF,CAEAR,EAAW,EAAK,CAClB,EAEA,OAAID,EACKU,EAAAA,IAAC,MAAA,CAAI,UAAU,gDAAgD,SAAA,aAAU,EAG7Ef,QAKF,MAAA,CAAI,UAAU,2BACb,SAAAgB,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,sDACb,SAAA,CAAAD,MAACE,EAAA,CAAK,GAAG,cAAc,UAAU,wBAAwB,SAAA,OAAI,EAC7DF,EAAAA,IAACG,EAAA,CAAa,UAAU,SAAA,CAAU,EAClCH,EAAAA,IAAC,OAAA,CAAK,UAAU,iBAAkB,WAAW,IAAA,CAAK,CAAA,EACpD,EAEAC,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAA0C,SAAAf,EAAW,KAAK,EACxEe,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAA0B,WAAW,YAAY,EAC9DC,EAAAA,KAAC,IAAA,CAAE,UAAU,8BAA+B,SAAA,CAAAb,EAAS,OAAO,WAAA,CAAA,CAAS,CAAA,EACvE,EAEAY,EAAAA,IAAC,MAAA,CAAI,UAAU,uDACZ,SAAAZ,EAAS,IAAIgB,GACZJ,EAAAA,IAACK,EAAA,CAA6B,QAAAD,CAAA,EAAZA,EAAQ,EAAsB,CACjD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,EAxBOJ,EAAAA,IAAC,MAAA,CAAI,UAAU,gDAAgD,SAAA,uBAAoB,CA0B9F"}