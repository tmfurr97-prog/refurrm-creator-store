import{r as n,j as e}from"./react-vendor-zXfd7Ve7.js";import{s as r,B as a,C as h,T as g}from"./index-D8webL0o.js";import{B as N}from"./badge-C_-9dwWz.js";import{D as b}from"./DashboardNav-ZSGo2elE.js";import"./vendor-BOHFvtXa.js";import"./ui-vendor-BrpyYz2q.js";import"./supabase-CH0YqYdn.js";function q(){const[p,u]=n.useState([]),[t,c]=n.useState("pending"),[i,o]=n.useState(null),[x,m]=n.useState("");n.useEffect(()=>{d()},[t]);const d=async()=>{let s=r.from("product_reviews").select("*").order("created_at",{ascending:!1});t==="pending"&&(s=s.eq("is_approved",!1)),t==="approved"&&(s=s.eq("is_approved",!0));const{data:l}=await s;l&&u(l)},v=async s=>{await r.from("product_reviews").update({is_approved:!0}).eq("id",s),d()},j=async s=>{await r.from("product_reviews").delete().eq("id",s),d()},f=async()=>{i&&(await r.from("product_reviews").update({admin_response:x,admin_response_date:new Date().toISOString()}).eq("id",i.id),o(null),m(""),d())};return e.jsxs("div",{className:"min-h-screen bg-slate-900",children:[e.jsx(b,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsx("h1",{className:"text-4xl font-black text-white mb-8",children:"Reviews Manager"}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs(a,{variant:t==="pending"?"default":"outline",onClick:()=>c("pending"),children:["Pending (",p.filter(s=>!s.is_approved).length,")"]}),e.jsx(a,{variant:t==="approved"?"default":"outline",onClick:()=>c("approved"),children:"Approved"}),e.jsx(a,{variant:t==="all"?"default":"outline",onClick:()=>c("all"),children:"All"})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:p.map(s=>e.jsxs(h,{className:"bg-slate-800 border-slate-700 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-white",children:s.customer_name}),e.jsx("div",{className:"flex mt-1",children:[1,2,3,4,5].map(l=>e.jsx("span",{className:l<=s.rating?"text-yellow-400":"text-slate-600",children:"â˜…"},l))})]}),e.jsx(N,{variant:s.is_approved?"default":"secondary",children:s.is_approved?"Approved":"Pending"})]}),e.jsx("h4",{className:"font-semibold text-white mb-2",children:s.title}),e.jsx("p",{className:"text-slate-300 mb-4",children:s.review_text}),e.jsxs("div",{className:"flex gap-2",children:[!s.is_approved&&e.jsx(a,{size:"sm",onClick:()=>v(s.id),children:"Approve"}),e.jsx(a,{size:"sm",variant:"outline",onClick:()=>o(s),children:"Respond"}),e.jsx(a,{size:"sm",variant:"destructive",onClick:()=>j(s.id),children:"Delete"})]})]},s.id))}),i&&e.jsxs(h,{className:"bg-slate-800 border-slate-700 p-6 h-fit sticky top-24",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Respond to Review"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-700 p-4 rounded",children:[e.jsx("p",{className:"text-white font-semibold",children:i.title}),e.jsx("p",{className:"text-slate-300 text-sm mt-2",children:i.review_text})]}),e.jsx(g,{placeholder:"Your response...",rows:6,value:x,onChange:s=>m(s.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{onClick:f,children:"Send Response"}),e.jsx(a,{variant:"outline",onClick:()=>o(null),children:"Cancel"})]})]})]})]})]})]})}export{q as default};
//# sourceMappingURL=ReviewsManager-BYee28-Q.js.map
