import{r,j as e,l as le,Z as xe,O as he,aF as ge,ae as ue,aq as te,X as fe,aG as je,aH as ve,_ as Se,aE as Ne,aI as we,aJ as me,aK as be,aL as Ce,ao as ye,a8 as ke,am as De,aM as pe,Q as Pe,i as Ee,an as Ve,M as Ie,$ as Te}from"./react-vendor-zXfd7Ve7.js";import{T as _e,a as Me,b as O,c as B}from"./tabs-DyFoJc2q.js";import{u as W,s as w,I,B as k,L as M,T as ne,C,p as ae,a as P,b as E,c as V,d as U}from"./index-k1V3dZSG.js";import{T as Y,a as ee,b as _,c as m,d as se,e as j}from"./table-Cg8Ddt1f.js";import{D as ce,e as re,a as ie,b as de,c as oe}from"./dialog-bS3FpGD2.js";import{C as J}from"./checkbox-B7lvHLDS.js";import{S as F,a as R,b as q,c as $,d as o}from"./select-C3Vw_1bu.js";import{B as Q}from"./badge-wcb6nnAT.js";import"./vendor-BOHFvtXa.js";import"./ui-vendor-BrpyYz2q.js";import"./supabase-CH0YqYdn.js";function Ae(){const[i,S]=r.useState([]),[x,d]=r.useState(""),[l,f]=r.useState(null),[n,p]=r.useState(!1),[h,g]=r.useState(new Set),{toast:t}=W();r.useEffect(()=>{v()},[]);async function v(){const{data:c,error:u}=await w.from("products").select("*").order("created_at",{ascending:!1});!u&&c&&S(c)}async function T(c){const{error:u}=await w.from("products").delete().eq("id",c);u||(t({title:"Product deleted"}),v())}async function G(){const c=Array.from(h),{error:u}=await w.from("products").delete().in("id",c);u||(t({title:`${c.length} products deleted`}),g(new Set),v())}function D(){const c=i.filter(a=>h.has(a.id)),u=[["ID","Name","Description","Price","Category","Stock"],...c.map(a=>[a.id,a.name,a.description,a.price,a.category,a.stock])].map(a=>a.join(",")).join(`
`),z=new Blob([u],{type:"text/csv"}),Z=URL.createObjectURL(z),s=document.createElement("a");s.href=Z,s.download="products.csv",s.click(),t({title:"CSV exported"})}async function A(c){c.preventDefault();const u=new FormData(c.currentTarget),z={name:u.get("name"),description:u.get("description"),price:parseFloat(u.get("price")),category:u.get("category"),stock:parseInt(u.get("stock")),image_url:u.get("image_url")};l?await w.from("products").update(z).eq("id",l.id):await w.from("products").insert([z]),t({title:l?"Product updated":"Product created"}),p(!1),f(null),v()}const L=i.filter(c=>c.name.toLowerCase().includes(x.toLowerCase())),K=c=>{const u=new Set(h);u.has(c)?u.delete(c):u.add(c),g(u)},X=()=>{h.size===L.length?g(new Set):g(new Set(L.map(c=>c.id)))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(I,{placeholder:"Search products...",value:x,onChange:c=>d(c.target.value),className:"max-w-sm"}),e.jsxs("div",{className:"flex gap-2",children:[h.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs(k,{variant:"outline",onClick:D,children:[e.jsx(le,{className:"mr-2 h-4 w-4"})," Export CSV"]}),e.jsxs(k,{variant:"destructive",onClick:G,children:[e.jsx(xe,{className:"mr-2 h-4 w-4"})," Delete (",h.size,")"]})]}),e.jsxs(ce,{open:n,onOpenChange:p,children:[e.jsx(re,{asChild:!0,children:e.jsxs(k,{onClick:()=>f(null),children:[e.jsx(he,{className:"mr-2 h-4 w-4"})," Add Product"]})}),e.jsxs(ie,{children:[e.jsx(de,{children:e.jsxs(oe,{children:[l?"Edit":"Add"," Product"]})}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(M,{children:"Name"}),e.jsx(I,{name:"name",defaultValue:l?.name,required:!0})]}),e.jsxs("div",{children:[e.jsx(M,{children:"Description"}),e.jsx(ne,{name:"description",defaultValue:l?.description,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(M,{children:"Price"}),e.jsx(I,{name:"price",type:"number",step:"0.01",defaultValue:l?.price,required:!0})]}),e.jsxs("div",{children:[e.jsx(M,{children:"Stock"}),e.jsx(I,{name:"stock",type:"number",defaultValue:l?.stock,required:!0})]})]}),e.jsxs("div",{children:[e.jsx(M,{children:"Category"}),e.jsx(I,{name:"category",defaultValue:l?.category,required:!0})]}),e.jsxs("div",{children:[e.jsx(M,{children:"Image URL"}),e.jsx(I,{name:"image_url",defaultValue:l?.image_url})]}),e.jsx(k,{type:"submit",className:"w-full",children:"Save"})]})]})]})]})]}),e.jsxs(Y,{children:[e.jsx(ee,{children:e.jsxs(_,{children:[e.jsx(m,{className:"w-12",children:e.jsx(J,{checked:h.size===L.length&&L.length>0,onCheckedChange:X})}),e.jsx(m,{children:"Name"}),e.jsx(m,{children:"Category"}),e.jsx(m,{children:"Price"}),e.jsx(m,{children:"Stock"}),e.jsx(m,{children:"Actions"})]})}),e.jsx(se,{children:L.map(c=>e.jsxs(_,{children:[e.jsx(j,{children:e.jsx(J,{checked:h.has(c.id),onCheckedChange:()=>K(c.id)})}),e.jsx(j,{children:c.name}),e.jsx(j,{children:c.category}),e.jsxs(j,{children:["$",c.price]}),e.jsx(j,{children:c.stock}),e.jsx(j,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{size:"sm",variant:"outline",onClick:()=>{f(c),p(!0)},children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(k,{size:"sm",variant:"destructive",onClick:()=>T(c.id),children:e.jsx(xe,{className:"h-4 w-4"})})]})})]},c.id))})]})]})}function Le(){const[i,S]=r.useState([]),[x,d]=r.useState(""),[l,f]=r.useState("all"),[n,p]=r.useState(new Set),[h,g]=r.useState(!1),[t,v]=r.useState(""),[T,G]=r.useState(""),{toast:D}=W();r.useEffect(()=>{A()},[]);async function A(){const{data:s,error:a}=await w.from("orders").select("*, profiles(email)").order("created_at",{ascending:!1});!a&&s&&S(s)}async function L(s,a){const{error:y}=await w.from("orders").update({status:a}).eq("id",s);y||(D({title:"Order status updated"}),A())}async function K(s){const a=Array.from(n),{error:y}=await w.from("orders").update({status:s}).in("id",a);y||(D({title:`${a.length} orders updated`}),p(new Set),A())}function X(){const s=i.filter(N=>n.has(N.id)),a=[["Order ID","User ID","Status","Total","Date"],...s.map(N=>[N.id,N.user_id,N.status,N.total,N.created_at])].map(N=>N.join(",")).join(`
`),y=new Blob([a],{type:"text/csv"}),H=URL.createObjectURL(y),b=document.createElement("a");b.href=H,b.download="orders.csv",b.click(),D({title:"CSV exported"})}async function c(){const a=i.filter(b=>n.has(b.id)).filter(b=>b.profiles?.email).map(b=>({email:b.profiles.email}));if(a.length===0){D({title:"No valid email addresses found",variant:"destructive"});return}const{data:y,error:H}=await w.functions.invoke("bulk-email-customers",{body:{recipients:a,subject:t,message:T}});H?D({title:"Failed to send emails",variant:"destructive"}):(D({title:`Emails sent to ${a.length} customers`}),g(!1),v(""),G(""))}const u=i.filter(s=>{const a=s.id.toString().includes(x)||s.user_id.includes(x),y=l==="all"||s.status===l;return a&&y}),z=s=>{const a=new Set(n);a.has(s)?a.delete(s):a.add(s),p(a)},Z=()=>{n.size===u.length?p(new Set):p(new Set(u.map(s=>s.id)))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(I,{placeholder:"Search by order ID or user...",value:x,onChange:s=>d(s.target.value),className:"max-w-sm"}),e.jsxs(F,{value:l,onValueChange:f,children:[e.jsx(R,{className:"w-[180px]",children:e.jsx(q,{})}),e.jsxs($,{children:[e.jsx(o,{value:"all",children:"All Status"}),e.jsx(o,{value:"pending",children:"Pending"}),e.jsx(o,{value:"processing",children:"Processing"}),e.jsx(o,{value:"completed",children:"Completed"}),e.jsx(o,{value:"cancelled",children:"Cancelled"})]})]})]}),n.size>0&&e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(F,{onValueChange:K,children:[e.jsx(R,{className:"w-[200px]",children:e.jsx(q,{placeholder:"Bulk Update Status"})}),e.jsxs($,{children:[e.jsx(o,{value:"pending",children:"Set to Pending"}),e.jsx(o,{value:"processing",children:"Set to Processing"}),e.jsx(o,{value:"completed",children:"Set to Completed"}),e.jsx(o,{value:"cancelled",children:"Set to Cancelled"})]})]}),e.jsxs(k,{variant:"outline",onClick:X,children:[e.jsx(le,{className:"mr-2 h-4 w-4"})," Export CSV"]}),e.jsxs(ce,{open:h,onOpenChange:g,children:[e.jsx(re,{asChild:!0,children:e.jsxs(k,{variant:"outline",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"})," Email (",n.size,")"]})}),e.jsxs(ie,{children:[e.jsx(de,{children:e.jsx(oe,{children:"Send Bulk Email"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(M,{children:"Subject"}),e.jsx(I,{value:t,onChange:s=>v(s.target.value),placeholder:"Email subject"})]}),e.jsxs("div",{children:[e.jsx(M,{children:"Message"}),e.jsx(ne,{value:T,onChange:s=>G(s.target.value),placeholder:"Email message",rows:6})]}),e.jsxs(k,{onClick:c,className:"w-full",children:["Send to ",n.size," customers"]})]})]})]})]}),e.jsxs(Y,{children:[e.jsx(ee,{children:e.jsxs(_,{children:[e.jsx(m,{className:"w-12",children:e.jsx(J,{checked:n.size===u.length&&u.length>0,onCheckedChange:Z})}),e.jsx(m,{children:"Order ID"}),e.jsx(m,{children:"User ID"}),e.jsx(m,{children:"Total"}),e.jsx(m,{children:"Status"}),e.jsx(m,{children:"Date"}),e.jsx(m,{children:"Actions"})]})}),e.jsx(se,{children:u.map(s=>e.jsxs(_,{children:[e.jsx(j,{children:e.jsx(J,{checked:n.has(s.id),onCheckedChange:()=>z(s.id)})}),e.jsxs(j,{children:["#",s.id]}),e.jsxs(j,{className:"font-mono text-xs",children:[s.user_id.slice(0,8),"..."]}),e.jsxs(j,{children:["$",s.total.toFixed(2)]}),e.jsx(j,{children:e.jsx(Q,{variant:s.status==="completed"?"default":"secondary",children:s.status})}),e.jsx(j,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(j,{children:e.jsxs(F,{value:s.status,onValueChange:a=>L(s.id,a),children:[e.jsx(R,{className:"w-[140px]",children:e.jsx(q,{})}),e.jsxs($,{children:[e.jsx(o,{value:"pending",children:"Pending"}),e.jsx(o,{value:"processing",children:"Processing"}),e.jsx(o,{value:"completed",children:"Completed"}),e.jsx(o,{value:"cancelled",children:"Cancelled"})]})]})})]},s.id))})]})]})}function Oe(){const[i,S]=r.useState([]),[x,d]=r.useState(""),[l,f]=r.useState("all"),[n,p]=r.useState(new Set),[h,g]=r.useState(!1),[t,v]=r.useState(""),[T,G]=r.useState(""),{toast:D}=W();r.useEffect(()=>{A()},[]);async function A(){const{data:s,error:a}=await w.from("subscriptions").select("*, profiles(email)").order("created_at",{ascending:!1});!a&&s&&S(s)}async function L(s,a){const{error:y}=await w.from("subscriptions").update({status:a}).eq("id",s);y||(D({title:"Subscription status updated"}),A())}async function K(s){const a=Array.from(n),{error:y}=await w.from("subscriptions").update({status:s}).in("id",a);y||(D({title:`${a.length} subscriptions updated`}),p(new Set),A())}function X(){const s=i.filter(N=>n.has(N.id)),a=[["ID","User ID","Plan","Status","Period End","Created"],...s.map(N=>[N.id,N.user_id,N.plan_type,N.status,N.current_period_end,N.created_at])].map(N=>N.join(",")).join(`
`),y=new Blob([a],{type:"text/csv"}),H=URL.createObjectURL(y),b=document.createElement("a");b.href=H,b.download="subscriptions.csv",b.click(),D({title:"CSV exported"})}async function c(){const a=i.filter(b=>n.has(b.id)).filter(b=>b.profiles?.email).map(b=>({email:b.profiles.email}));if(a.length===0){D({title:"No valid email addresses found",variant:"destructive"});return}const{data:y,error:H}=await w.functions.invoke("bulk-email-customers",{body:{recipients:a,subject:t,message:T}});H?D({title:"Failed to send emails",variant:"destructive"}):(D({title:`Emails sent to ${a.length} customers`}),g(!1),v(""),G(""))}const u=i.filter(s=>{const a=s.user_id.includes(x)||s.plan_type.toLowerCase().includes(x.toLowerCase()),y=l==="all"||s.status===l;return a&&y}),z=s=>{const a=new Set(n);a.has(s)?a.delete(s):a.add(s),p(a)},Z=()=>{n.size===u.length?p(new Set):p(new Set(u.map(s=>s.id)))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(I,{placeholder:"Search by user or plan...",value:x,onChange:s=>d(s.target.value),className:"max-w-sm"}),e.jsxs(F,{value:l,onValueChange:f,children:[e.jsx(R,{className:"w-[180px]",children:e.jsx(q,{})}),e.jsxs($,{children:[e.jsx(o,{value:"all",children:"All Status"}),e.jsx(o,{value:"active",children:"Active"}),e.jsx(o,{value:"cancelled",children:"Cancelled"}),e.jsx(o,{value:"past_due",children:"Past Due"})]})]})]}),n.size>0&&e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(F,{onValueChange:K,children:[e.jsx(R,{className:"w-[200px]",children:e.jsx(q,{placeholder:"Bulk Update Status"})}),e.jsxs($,{children:[e.jsx(o,{value:"active",children:"Set to Active"}),e.jsx(o,{value:"cancelled",children:"Set to Cancelled"}),e.jsx(o,{value:"past_due",children:"Set to Past Due"})]})]}),e.jsxs(k,{variant:"outline",onClick:X,children:[e.jsx(le,{className:"mr-2 h-4 w-4"})," Export CSV"]}),e.jsxs(ce,{open:h,onOpenChange:g,children:[e.jsx(re,{asChild:!0,children:e.jsxs(k,{variant:"outline",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"})," Email (",n.size,")"]})}),e.jsxs(ie,{children:[e.jsx(de,{children:e.jsx(oe,{children:"Send Bulk Email"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(M,{children:"Subject"}),e.jsx(I,{value:t,onChange:s=>v(s.target.value),placeholder:"Email subject"})]}),e.jsxs("div",{children:[e.jsx(M,{children:"Message"}),e.jsx(ne,{value:T,onChange:s=>G(s.target.value),placeholder:"Email message",rows:6})]}),e.jsxs(k,{onClick:c,className:"w-full",children:["Send to ",n.size," customers"]})]})]})]})]}),e.jsxs(Y,{children:[e.jsx(ee,{children:e.jsxs(_,{children:[e.jsx(m,{className:"w-12",children:e.jsx(J,{checked:n.size===u.length&&u.length>0,onCheckedChange:Z})}),e.jsx(m,{children:"ID"}),e.jsx(m,{children:"User ID"}),e.jsx(m,{children:"Plan"}),e.jsx(m,{children:"Status"}),e.jsx(m,{children:"Period End"}),e.jsx(m,{children:"Actions"})]})}),e.jsx(se,{children:u.map(s=>e.jsxs(_,{children:[e.jsx(j,{children:e.jsx(J,{checked:n.has(s.id),onCheckedChange:()=>z(s.id)})}),e.jsxs(j,{children:["#",s.id]}),e.jsxs(j,{className:"font-mono text-xs",children:[s.user_id.slice(0,8),"..."]}),e.jsx(j,{className:"capitalize",children:s.plan_type}),e.jsx(j,{children:e.jsx(Q,{variant:s.status==="active"?"default":"secondary",children:s.status})}),e.jsx(j,{children:new Date(s.current_period_end).toLocaleDateString()}),e.jsx(j,{children:e.jsxs(F,{value:s.status,onValueChange:a=>L(s.id,a),children:[e.jsx(R,{className:"w-[140px]",children:e.jsx(q,{})}),e.jsxs($,{children:[e.jsx(o,{value:"active",children:"Active"}),e.jsx(o,{value:"cancelled",children:"Cancelled"}),e.jsx(o,{value:"past_due",children:"Past Due"})]})]})})]},s.id))})]})]})}function Be(){const[i,S]=r.useState([]),[x,d]=r.useState(""),[l,f]=r.useState("all"),{toast:n}=W();r.useEffect(()=>{p()},[]);async function p(){const{data:t,error:v}=await w.from("support_tickets").select("*").order("created_at",{ascending:!1});!v&&t&&S(t)}async function h(t,v){const{error:T}=await w.from("support_tickets").update({status:v}).eq("id",t);T||(n({title:"Ticket status updated"}),p())}const g=i.filter(t=>{const v=t.subject.toLowerCase().includes(x.toLowerCase()),T=l==="all"||t.status===l;return v&&T});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(I,{placeholder:"Search tickets...",value:x,onChange:t=>d(t.target.value),className:"max-w-sm"}),e.jsxs(F,{value:l,onValueChange:f,children:[e.jsx(R,{className:"w-[180px]",children:e.jsx(q,{})}),e.jsxs($,{children:[e.jsx(o,{value:"all",children:"All Status"}),e.jsx(o,{value:"open",children:"Open"}),e.jsx(o,{value:"in_progress",children:"In Progress"}),e.jsx(o,{value:"resolved",children:"Resolved"}),e.jsx(o,{value:"closed",children:"Closed"})]})]})]}),e.jsxs(Y,{children:[e.jsx(ee,{children:e.jsxs(_,{children:[e.jsx(m,{children:"ID"}),e.jsx(m,{children:"Subject"}),e.jsx(m,{children:"Priority"}),e.jsx(m,{children:"Status"}),e.jsx(m,{children:"Date"}),e.jsx(m,{children:"Actions"})]})}),e.jsx(se,{children:g.map(t=>e.jsxs(_,{children:[e.jsxs(j,{children:["#",t.id]}),e.jsx(j,{children:t.subject}),e.jsx(j,{children:e.jsx(Q,{variant:t.priority==="high"?"destructive":"secondary",children:t.priority})}),e.jsx(j,{children:e.jsx(Q,{variant:t.status==="open"?"default":"secondary",children:t.status})}),e.jsx(j,{children:new Date(t.created_at).toLocaleDateString()}),e.jsx(j,{children:e.jsxs(F,{value:t.status,onValueChange:v=>h(t.id,v),children:[e.jsx(R,{className:"w-[140px]",children:e.jsx(q,{})}),e.jsxs($,{children:[e.jsx(o,{value:"open",children:"Open"}),e.jsx(o,{value:"in_progress",children:"In Progress"}),e.jsx(o,{value:"resolved",children:"Resolved"}),e.jsx(o,{value:"closed",children:"Closed"})]})]})})]},t.id))})]})]})}function Ue(){const[i,S]=r.useState(""),[x,d]=r.useState([]),[l,f]=r.useState(!1),{toast:n}=W();r.useEffect(()=>{p()},[]);const p=async()=>{const{data:t}=await w.from("profiles").select("*").eq("is_vip",!0).order("created_at",{ascending:!1});d(t||[])},h=async()=>{if(!i)return;f(!0);const{error:t}=await w.functions.invoke("grant-vip-access",{body:{email:i,grant:!0}});t?n({title:"Error",description:t.message,variant:"destructive"}):(n({title:"Success",description:`VIP access granted to ${i}`}),S(""),p()),f(!1)},g=async t=>{const{error:v}=await w.functions.invoke("grant-vip-access",{body:{email:t,grant:!1}});v?n({title:"Error",description:v.message,variant:"destructive"}):(n({title:"Success",description:"VIP access revoked"}),p())};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(C,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5 text-yellow-500"}),"Grant VIP Access"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{placeholder:"Enter email address",value:i,onChange:t=>S(t.target.value),onKeyPress:t=>t.key==="Enter"&&h()}),e.jsxs(k,{onClick:h,disabled:l||!i,children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Grant VIP"]})]})]}),e.jsxs(C,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Current VIP Users (",x.length,")"]}),e.jsxs("div",{className:"space-y-2",children:[x.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.email}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Since ",new Date(t.created_at).toLocaleDateString()]})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>g(t.email),children:e.jsx(fe,{className:"h-4 w-4"})})]},t.id)),x.length===0&&e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No VIP users yet"})]})]})]})}const ze=[{id:"artist",name:"Artist/Musician",icon:ve,color:"text-purple-500"},{id:"coach",name:"Coach/Consultant",icon:Se,color:"text-blue-500"},{id:"creator",name:"Content Creator",icon:Ne,color:"text-pink-500"},{id:"consultant",name:"Business Consultant",icon:we,color:"text-green-500"}];function Fe(){const[i,S]=r.useState(!1),{toast:x}=W(),d=async l=>{S(!0);const{data:f,error:n}=await w.functions.invoke("seed-account-data",{body:{businessType:l}});x(n?{title:"Error",description:n.message,variant:"destructive"}:{title:"Setup Complete!",description:`Created ${f.productsCount} products, ${f.customersCount} customers, and more.`}),S(!1)};return e.jsx("div",{className:"space-y-6",children:e.jsxs(C,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),"One-Click Setup Wizard"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Automatically populate your account with sample data based on your business type"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ze.map(l=>{const f=l.icon;return e.jsxs(C,{className:"p-4 hover:border-primary transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(f,{className:`h-6 w-6 ${l.color}`}),e.jsx("h4",{className:"font-semibold",children:l.name})]}),e.jsxs(k,{onClick:()=>d(l.id),disabled:i,className:"w-full",children:["Setup as ",l.name]})]},l.id)})})]})})}function Re(){return e.jsx("div",{children:e.jsx("p",{className:"text-muted-foreground",children:"Bookings manager coming soon..."})})}function qe(){const[i,S]=r.useState(!1),{toast:x}=W(),d=async l=>{S(!0);const{data:f,error:n}=await w.functions.invoke("export-data",{body:{format:l}});if(n)x({title:"Error",description:n.message,variant:"destructive"});else{const p=new Blob([f.content],{type:l==="csv"?"text/csv":"application/json"}),h=window.URL.createObjectURL(p),g=document.createElement("a");g.href=h,g.download=`data-export-${Date.now()}.${l}`,g.click(),x({title:"Success",description:"Data exported successfully"})}S(!1)};return e.jsx("div",{className:"space-y-6",children:e.jsxs(C,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),"Export All Data"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Download all your products, customers, orders, and analytics data"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(k,{onClick:()=>d("csv"),disabled:i,variant:"outline",className:"h-24",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(be,{className:"h-8 w-8"}),e.jsx("span",{children:"Export as CSV"})]})}),e.jsx(k,{onClick:()=>d("json"),disabled:i,variant:"outline",className:"h-24",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Ce,{className:"h-8 w-8"}),e.jsx("span",{children:"Export as JSON"})]})})]})]})})}function $e(){const[i,S]=r.useState(ae.getMetrics());r.useEffect(()=>{const h=setInterval(()=>{S(ae.getMetrics())},2e3);return()=>clearInterval(h)},[]);const x=i.filter(h=>h.type==="api-call"),d=i.filter(h=>h.type==="error"),l=i.filter(h=>h.type==="page-load"),f=x.length>0?x.reduce((h,g)=>h+(g.duration||0),0)/x.length:0,n=l.length>0?l.reduce((h,g)=>h+(g.duration||0),0)/l.length:0,p=i.length>0?d.length/i.length*100:0;return e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(C,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:"Avg API Time"}),e.jsx(ye,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[f.toFixed(0),"ms"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.length," calls tracked"]})]})]}),e.jsxs(C,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:"Avg Page Load"}),e.jsx(ke,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[n.toFixed(0),"ms"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.length," pages tracked"]})]})]}),e.jsxs(C,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:"Error Rate"}),e.jsx(De,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[p.toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.length," errors"]})]})]}),e.jsxs(C,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:"Total Metrics"}),e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 1000 events"})]})]})]})}function Ge(){const[i,S]=r.useState(ae.getMetrics());r.useEffect(()=>{const d=setInterval(()=>{S(ae.getMetrics())},2e3);return()=>clearInterval(d)},[]);const x=i.filter(d=>d.type==="api-call"&&d.duration).sort((d,l)=>(l.duration||0)-(d.duration||0)).slice(0,10);return e.jsxs(C,{children:[e.jsx(P,{children:e.jsx(E,{children:"Slowest API Calls"})}),e.jsx(V,{children:e.jsxs(Y,{children:[e.jsx(ee,{children:e.jsxs(_,{children:[e.jsx(m,{children:"API Call"}),e.jsx(m,{children:"Duration"}),e.jsx(m,{children:"Time"}),e.jsx(m,{children:"Status"})]})}),e.jsx(se,{children:x.length===0?e.jsx(_,{children:e.jsx(j,{colSpan:4,className:"text-center text-muted-foreground",children:"No API calls tracked yet"})}):x.map(d=>e.jsxs(_,{children:[e.jsx(j,{className:"font-medium",children:d.name}),e.jsx(j,{children:e.jsxs(Q,{variant:(d.duration||0)>1e3?"destructive":"secondary",children:[d.duration?.toFixed(0),"ms"]})}),e.jsx(j,{className:"text-sm text-muted-foreground",children:new Date(d.timestamp).toLocaleTimeString()}),e.jsx(j,{children:e.jsx(Q,{variant:d.metadata?.success?"default":"destructive",children:d.metadata?.success?"Success":"Failed"})})]},d.id))})]})})]})}function ts(){return e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage all aspects of your application"})]}),e.jsxs(_e,{defaultValue:"performance",className:"space-y-6",children:[e.jsxs(Me,{className:"grid w-full grid-cols-9 gap-2",children:[e.jsxs(O,{value:"performance",className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),"Performance"]}),e.jsxs(O,{value:"products",className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Products"]}),e.jsxs(O,{value:"orders",className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Orders"]}),e.jsxs(O,{value:"subscriptions",className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Subscriptions"]}),e.jsxs(O,{value:"support",className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Support"]}),e.jsxs(O,{value:"bookings",className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),"Bookings"]}),e.jsxs(O,{value:"vip",className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"VIP"]}),e.jsxs(O,{value:"setup",className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"Setup"]}),e.jsxs(O,{value:"export",className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),"Export"]})]}),e.jsx(B,{value:"performance",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx($e,{}),e.jsx(Ge,{}),e.jsxs(C,{children:[e.jsxs(P,{children:[e.jsx(E,{children:"Error Log"}),e.jsx(U,{children:"Recent errors and exceptions"})]}),e.jsx(V,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Check browser console for detailed error logs"})})]})]})}),e.jsx(B,{value:"products",children:e.jsxs(C,{children:[e.jsxs(P,{children:[e.jsx(E,{children:"Products Management"}),e.jsx(U,{children:"View and manage all products in your store"})]}),e.jsx(V,{children:e.jsx(Ae,{})})]})}),e.jsx(B,{value:"orders",children:e.jsxs(C,{children:[e.jsxs(P,{children:[e.jsx(E,{children:"Orders Management"}),e.jsx(U,{children:"View and update order statuses"})]}),e.jsx(V,{children:e.jsx(Le,{})})]})}),e.jsx(B,{value:"subscriptions",children:e.jsxs(C,{children:[e.jsxs(P,{children:[e.jsx(E,{children:"Subscriptions Management"}),e.jsx(U,{children:"Manage user subscriptions and billing"})]}),e.jsx(V,{children:e.jsx(Oe,{})})]})}),e.jsx(B,{value:"support",children:e.jsxs(C,{children:[e.jsxs(P,{children:[e.jsx(E,{children:"Support Tickets"}),e.jsx(U,{children:"Manage customer support requests"})]}),e.jsx(V,{children:e.jsx(Be,{})})]})}),e.jsx(B,{value:"bookings",children:e.jsxs(C,{children:[e.jsxs(P,{children:[e.jsx(E,{children:"Bookings Management"}),e.jsx(U,{children:"View and manage all bookings"})]}),e.jsx(V,{children:e.jsx(Re,{})})]})}),e.jsx(B,{value:"vip",children:e.jsxs(C,{children:[e.jsxs(P,{children:[e.jsx(E,{children:"VIP Management"}),e.jsx(U,{children:"Grant and manage VIP premium access"})]}),e.jsx(V,{children:e.jsx(Ue,{})})]})}),e.jsx(B,{value:"setup",children:e.jsxs(C,{children:[e.jsxs(P,{children:[e.jsx(E,{children:"Quick Setup Wizard"}),e.jsx(U,{children:"Populate your account with sample data"})]}),e.jsx(V,{children:e.jsx(Fe,{})})]})}),e.jsx(B,{value:"export",children:e.jsxs(C,{children:[e.jsxs(P,{children:[e.jsx(E,{children:"Data Export"}),e.jsx(U,{children:"Download all your data for backup or analysis"})]}),e.jsx(V,{children:e.jsx(qe,{})})]})})]})]})}export{ts as default};
//# sourceMappingURL=Admin-DkHgIvb-.js.map
