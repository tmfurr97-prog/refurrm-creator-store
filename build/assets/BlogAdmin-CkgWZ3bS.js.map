{"version":3,"file":"BlogAdmin-CkgWZ3bS.js","sources":["../../src/pages/BlogAdmin.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card } from '@/components/ui/card';\nimport { RichTextEditor } from '@/components/RichTextEditor';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { toast } from 'sonner';\nimport { Plus, Save, Eye, Trash2 } from 'lucide-react';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\n\nexport default function BlogAdmin() {\n  const [posts, setPosts] = useState<any[]>([]);\n  const [editing, setEditing] = useState<any>(null);\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [excerpt, setExcerpt] = useState('');\n  const [featuredImage, setFeaturedImage] = useState('');\n  const [seoTitle, setSeoTitle] = useState('');\n  const [seoDescription, setSeoDescription] = useState('');\n  const [status, setStatus] = useState('draft');\n  const [categories, setCategories] = useState<any[]>([]);\n  const [selectedCategory, setSelectedCategory] = useState('');\n\n  useEffect(() => {\n    loadPosts();\n    loadCategories();\n  }, []);\n\n  const loadPosts = async () => {\n    const { data } = await supabase.from('blog_posts').select('*').order('created_at', { ascending: false });\n    setPosts(data || []);\n  };\n\n  const loadCategories = async () => {\n    const { data } = await supabase.from('blog_categories').select('*');\n    setCategories(data || []);\n  };\n\n  const handleSave = async () => {\n    const postData = { title, content, excerpt, featured_image: featuredImage, seo_title: seoTitle, seo_description: seoDescription, status, category_id: selectedCategory || null };\n    if (editing) {\n      await supabase.from('blog_posts').update(postData).eq('id', editing.id);\n      toast.success('Post updated');\n    } else {\n      await supabase.from('blog_posts').insert(postData);\n      toast.success('Post created');\n    }\n    resetForm();\n    loadPosts();\n  };\n\n  const resetForm = () => {\n    setEditing(null);\n    setTitle('');\n    setContent('');\n    setExcerpt('');\n    setFeaturedImage('');\n    setSeoTitle('');\n    setSeoDescription('');\n    setStatus('draft');\n    setSelectedCategory('');\n  };\n\n  const handleDelete = async (id: string) => {\n    await supabase.from('blog_posts').delete().eq('id', id);\n    toast.success('Post deleted');\n    loadPosts();\n  };\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold\">Blog Admin</h1>\n        <Button onClick={resetForm}><Plus className=\"h-4 w-4 mr-2\" />New Post</Button>\n      </div>\n\n      <div className=\"grid lg:grid-cols-3 gap-6\">\n        <Card className=\"lg:col-span-2 p-6\">\n          <div className=\"space-y-4\">\n            <div><Label>Title</Label><Input value={title} onChange={(e) => setTitle(e.target.value)} /></div>\n            <div><Label>Content</Label><RichTextEditor value={content} onChange={setContent} /></div>\n            <div><Label>Excerpt</Label><Input value={excerpt} onChange={(e) => setExcerpt(e.target.value)} /></div>\n          </div>\n        </Card>\n\n        <Card className=\"p-6 h-fit\">\n          <div className=\"space-y-4\">\n            <div><Label>Status</Label><Select value={status} onValueChange={setStatus}><SelectTrigger><SelectValue /></SelectTrigger><SelectContent><SelectItem value=\"draft\">Draft</SelectItem><SelectItem value=\"published\">Published</SelectItem></SelectContent></Select></div>\n            <div><Label>Category</Label><Select value={selectedCategory} onValueChange={setSelectedCategory}><SelectTrigger><SelectValue placeholder=\"Select\" /></SelectTrigger><SelectContent>{categories.map(c => <SelectItem key={c.id} value={c.id}>{c.name}</SelectItem>)}</SelectContent></Select></div>\n            <div><Label>Featured Image URL</Label><Input value={featuredImage} onChange={(e) => setFeaturedImage(e.target.value)} /></div>\n            <div><Label>SEO Title</Label><Input value={seoTitle} onChange={(e) => setSeoTitle(e.target.value)} /></div>\n            <div><Label>SEO Description</Label><Input value={seoDescription} onChange={(e) => setSeoDescription(e.target.value)} /></div>\n            <div className=\"flex gap-2\"><Button onClick={handleSave} className=\"flex-1\"><Save className=\"h-4 w-4 mr-2\" />Save</Button><Button variant=\"outline\"><Eye className=\"h-4 w-4\" /></Button></div>\n          </div>\n        </Card>\n      </div>\n\n      <Card className=\"mt-6 p-6\">\n        <h2 className=\"text-xl font-bold mb-4\">All Posts</h2>\n        <Table>\n          <TableHeader><TableRow><TableHead>Title</TableHead><TableHead>Status</TableHead><TableHead>Date</TableHead><TableHead>Actions</TableHead></TableRow></TableHeader>\n          <TableBody>\n            {posts.map(post => (\n              <TableRow key={post.id}>\n                <TableCell>{post.title}</TableCell>\n                <TableCell><span className={`px-2 py-1 rounded text-xs ${post.status === 'published' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>{post.status}</span></TableCell>\n                <TableCell>{new Date(post.created_at).toLocaleDateString()}</TableCell>\n                <TableCell className=\"flex gap-2\"><Button size=\"sm\" variant=\"outline\" onClick={() => { setEditing(post); setTitle(post.title); setContent(post.content); setExcerpt(post.excerpt); setFeaturedImage(post.featured_image); setSeoTitle(post.seo_title); setSeoDescription(post.seo_description); setStatus(post.status); setSelectedCategory(post.category_id); }}>Edit</Button><Button size=\"sm\" variant=\"destructive\" onClick={() => handleDelete(post.id)}><Trash2 className=\"h-4 w-4\" /></Button></TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </Card>\n    </div>\n  );\n}\n"],"names":["BlogAdmin","posts","setPosts","useState","editing","setEditing","title","setTitle","content","setContent","excerpt","setExcerpt","featuredImage","setFeaturedImage","seoTitle","setSeoTitle","seoDescription","setSeoDescription","status","setStatus","categories","setCategories","selectedCategory","setSelectedCategory","useEffect","loadPosts","loadCategories","data","supabase","handleSave","postData","toast","resetForm","handleDelete","id","jsxs","jsx","Button","Plus","Card","Label","Input","e","RichTextEditor","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","c","Save","Eye","Table","TableHeader","TableRow","TableHead","TableBody","post","TableCell","Trash2"],"mappings":"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"}