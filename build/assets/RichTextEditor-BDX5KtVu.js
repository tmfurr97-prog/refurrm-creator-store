import{r as b,j as e,bG as N,bH as k,bI as C,bJ as R,aY as z,bK as E}from"./react-vendor-zXfd7Ve7.js";import{m as L}from"./markdown-B2p_DnqW.js";import{B as a,T as I}from"./index-D8webL0o.js";function B({value:l,onChange:d,onImageUpload:m}){const[c,u]=b.useState(!1),h=b.useRef(null),r=(t,i="")=>{const s=h.current;if(!s)return;const n=s.value,o=s.selectionStart??n.length,x=s.selectionEnd??n.length,p=n.substring(o,x)||"text",v=n.substring(0,o)+t+p+i+n.substring(x);d(v),requestAnimationFrame(()=>{const g=o+t.length,y=g+p.length;s.focus(),s.setSelectionRange(g,y)})},f=()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=async()=>{const i=t.files?.[0];if(!i)return;let s;if(m){const o=await m(i);typeof o=="string"&&(s=o)}if(s){r(`![${i.name}](${s})`);return}const n=new FileReader;n.onloadend=()=>{typeof n.result=="string"&&r(`![${i.name}](${n.result})`)},n.readAsDataURL(i)},t.click()},j=()=>{const t=window.prompt("Enter URL");t&&r("[",`](${t})`)},w=()=>{const t=L.parse(l||"");return typeof t!="string"?e.jsx("p",{className:"text-slate-400",children:"Preview is loading..."}):e.jsx("div",{className:"prose prose-slate max-w-none",dangerouslySetInnerHTML:{__html:t}})};return e.jsxs("div",{className:"rounded-md border border-slate-200 bg-white",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-slate-200 bg-slate-50/80 p-2",children:[e.jsx(a,{type:"button",variant:"ghost",size:"icon",onClick:()=>r("**","**"),"aria-label":"Bold",children:e.jsx(N,{className:"h-4 w-4"})}),e.jsx(a,{type:"button",variant:"ghost",size:"icon",onClick:()=>r("*","*"),"aria-label":"Italic",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx(a,{type:"button",variant:"ghost",size:"icon",onClick:()=>r(`
- `,""),"aria-label":"List",children:e.jsx(C,{className:"h-4 w-4"})}),e.jsx(a,{type:"button",variant:"ghost",size:"icon",onClick:j,"aria-label":"Link",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx(a,{type:"button",variant:"ghost",size:"icon",onClick:f,"aria-label":"Image",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx(a,{type:"button",variant:"ghost",size:"icon",onClick:()=>r("`","`"),"aria-label":"Code",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsxs("div",{className:"ml-auto flex items-center gap-1",children:[e.jsx(a,{type:"button",variant:c?"ghost":"secondary",size:"sm",onClick:()=>u(!1),children:"Edit"}),e.jsx(a,{type:"button",variant:c?"secondary":"ghost",size:"sm",onClick:()=>u(!0),children:"Preview"})]})]}),c?e.jsx("div",{className:"min-h-[160px] p-3 text-sm",children:l?w():e.jsx("p",{className:"text-slate-400",children:"Nothing to preview yet."})}):e.jsx(I,{ref:h,value:l,onChange:t=>d(t.target.value),rows:10,className:"min-h-[160px] rounded-none border-0 focus-visible:ring-0 focus-visible:border-transparent"})]})}export{B as R};
//# sourceMappingURL=RichTextEditor-BDX5KtVu.js.map
