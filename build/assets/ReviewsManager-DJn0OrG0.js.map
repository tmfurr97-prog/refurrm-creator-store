{"version":3,"file":"ReviewsManager-DJn0OrG0.js","sources":["../../src/pages/ReviewsManager.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Textarea } from '@/components/ui/textarea';\nimport { supabase } from '@/lib/supabase';\nimport DashboardNav from '@/components/DashboardNav';\n\ninterface Review {\n  id: string;\n  product_id: string;\n  customer_name: string;\n  customer_email: string;\n  rating: number;\n  title: string;\n  review_text: string;\n  is_approved: boolean;\n  admin_response: string | null;\n  created_at: string;\n}\n\nexport default function ReviewsManager() {\n  const [reviews, setReviews] = useState<Review[]>([]);\n  const [filter, setFilter] = useState<'pending' | 'approved' | 'all'>('pending');\n  const [selectedReview, setSelectedReview] = useState<Review | null>(null);\n  const [response, setResponse] = useState('');\n\n  useEffect(() => {\n    loadReviews();\n  }, [filter]);\n\n  const loadReviews = async () => {\n    let query = supabase.from('product_reviews').select('*').order('created_at', { ascending: false });\n    if (filter === 'pending') query = query.eq('is_approved', false);\n    if (filter === 'approved') query = query.eq('is_approved', true);\n    const { data } = await query;\n    if (data) setReviews(data);\n  };\n\n  const handleApprove = async (id: string) => {\n    await supabase.from('product_reviews').update({ is_approved: true }).eq('id', id);\n    loadReviews();\n  };\n\n  const handleReject = async (id: string) => {\n    await supabase.from('product_reviews').delete().eq('id', id);\n    loadReviews();\n  };\n\n  const handleRespond = async () => {\n    if (!selectedReview) return;\n    await supabase.from('product_reviews').update({ admin_response: response, admin_response_date: new Date().toISOString() }).eq('id', selectedReview.id);\n    setSelectedReview(null);\n    setResponse('');\n    loadReviews();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-slate-900\">\n      <DashboardNav />\n      <div className=\"max-w-7xl mx-auto px-6 py-8\">\n        <h1 className=\"text-4xl font-black text-white mb-8\">Reviews Manager</h1>\n\n        <div className=\"flex gap-2 mb-6\">\n          <Button variant={filter === 'pending' ? 'default' : 'outline'} onClick={() => setFilter('pending')}>\n            Pending ({reviews.filter(r => !r.is_approved).length})\n          </Button>\n          <Button variant={filter === 'approved' ? 'default' : 'outline'} onClick={() => setFilter('approved')}>Approved</Button>\n          <Button variant={filter === 'all' ? 'default' : 'outline'} onClick={() => setFilter('all')}>All</Button>\n        </div>\n\n        <div className=\"grid lg:grid-cols-2 gap-6\">\n          <div className=\"space-y-4\">\n            {reviews.map((review) => (\n              <Card key={review.id} className=\"bg-slate-800 border-slate-700 p-6\">\n                <div className=\"flex justify-between items-start mb-2\">\n                  <div>\n                    <span className=\"font-semibold text-white\">{review.customer_name}</span>\n                    <div className=\"flex mt-1\">\n                      {[1, 2, 3, 4, 5].map((star) => (\n                        <span key={star} className={star <= review.rating ? 'text-yellow-400' : 'text-slate-600'}>â˜…</span>\n                      ))}\n                    </div>\n                  </div>\n                  <Badge variant={review.is_approved ? 'default' : 'secondary'}>{review.is_approved ? 'Approved' : 'Pending'}</Badge>\n                </div>\n                <h4 className=\"font-semibold text-white mb-2\">{review.title}</h4>\n                <p className=\"text-slate-300 mb-4\">{review.review_text}</p>\n                <div className=\"flex gap-2\">\n                  {!review.is_approved && <Button size=\"sm\" onClick={() => handleApprove(review.id)}>Approve</Button>}\n                  <Button size=\"sm\" variant=\"outline\" onClick={() => setSelectedReview(review)}>Respond</Button>\n                  <Button size=\"sm\" variant=\"destructive\" onClick={() => handleReject(review.id)}>Delete</Button>\n                </div>\n              </Card>\n            ))}\n          </div>\n\n          {selectedReview && (\n            <Card className=\"bg-slate-800 border-slate-700 p-6 h-fit sticky top-24\">\n              <h3 className=\"text-xl font-bold text-white mb-4\">Respond to Review</h3>\n              <div className=\"space-y-4\">\n                <div className=\"bg-slate-700 p-4 rounded\">\n                  <p className=\"text-white font-semibold\">{selectedReview.title}</p>\n                  <p className=\"text-slate-300 text-sm mt-2\">{selectedReview.review_text}</p>\n                </div>\n                <Textarea placeholder=\"Your response...\" rows={6} value={response} onChange={(e) => setResponse(e.target.value)} />\n                <div className=\"flex gap-2\">\n                  <Button onClick={handleRespond}>Send Response</Button>\n                  <Button variant=\"outline\" onClick={() => setSelectedReview(null)}>Cancel</Button>\n                </div>\n              </div>\n            </Card>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["ReviewsManager","reviews","setReviews","useState","filter","setFilter","selectedReview","setSelectedReview","response","setResponse","useEffect","loadReviews","query","supabase","data","handleApprove","id","handleReject","handleRespond","jsxs","jsx","DashboardNav","Button","r","review","Card","star","Badge","Textarea","e"],"mappings":"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"}