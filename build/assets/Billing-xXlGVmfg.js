import{r as o,j as e,am as f}from"./react-vendor-zXfd7Ve7.js";import{h as g,s as m}from"./index-D8webL0o.js";import{D as j}from"./DashboardNav-ZSGo2elE.js";import"./vendor-BOHFvtXa.js";import"./ui-vendor-BrpyYz2q.js";import"./supabase-CH0YqYdn.js";function v({gracePeriodEnd:r,onExpired:s}){const[n,t]=o.useState(""),[a,d]=o.useState(!1);return o.useEffect(()=>{const i=()=>{const h=new Date(r).getTime(),b=Date.now(),l=h-b;if(l<=0){t("Expired"),s?.();return}const u=Math.floor(l/(1e3*60*60*24)),x=Math.floor(l%(1e3*60*60*24)/(1e3*60*60)),p=Math.floor(l%(1e3*60*60)/(1e3*60));d(u<2),u>0?t(`${u}d ${x}h`):x>0?t(`${x}h ${p}m`):t(`${p}m`)};i();const c=setInterval(i,6e4);return()=>clearInterval(c)},[r,s]),e.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg border-2 ${a?"bg-red-50 border-red-300":"bg-yellow-50 border-yellow-300"}`,children:[e.jsx(f,{className:`w-6 h-6 ${a?"text-red-600":"text-yellow-600"}`}),e.jsxs("div",{children:[e.jsxs("p",{className:`font-semibold ${a?"text-red-900":"text-yellow-900"}`,children:["Grace Period: ",n," remaining"]}),e.jsx("p",{className:`text-sm ${a?"text-red-700":"text-yellow-700"}`,children:"Update your payment method to avoid service interruption"})]})]})}function C(){const{user:r,profile:s}=g(),[n,t]=o.useState(!1),a=s?.trial_ends_at?Math.ceil((new Date(s.trial_ends_at).getTime()-Date.now())/(1e3*60*60*24)):0,d=async()=>{t(!0),alert("Stripe customer portal will open here. You can update payment method, view invoices, and manage subscription."),t(!1)},i=async()=>{confirm("Are you sure you want to cancel your subscription? You will lose access at the end of your billing period.")&&(t(!0),await m.from("profiles").update({subscription_status:"canceled"}).eq("id",r?.id),alert("Subscription canceled. You will have access until the end of your billing period."),t(!1))},c=async()=>{t(!0),await m.from("profiles").update({subscription_status:"active"}).eq("id",r?.id),alert("Subscription reactivated!"),t(!1)};return e.jsxs("div",{className:"flex min-h-screen bg-slate-50",children:[e.jsx(j,{}),e.jsx("div",{className:"flex-1 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-8",children:"Billing & Subscription"}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Current Plan"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:"ReFurrm Shops Pro"}),e.jsx("p",{className:"text-slate-600",children:"$29 per month"})]}),e.jsx("span",{className:`px-4 py-2 rounded text-sm font-semibold ${s?.subscription_status==="trial"?"bg-blue-100 text-blue-700":s?.subscription_status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s?.subscription_status==="trial"?"Free Trial":s?.subscription_status==="active"?"Active":"Canceled"})]}),s?.subscription_status==="trial"&&a>0&&e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-purple-900",children:[e.jsxs("strong",{children:[a," days"]})," left in your free trial. Add a payment method to continue after your trial ends."]})}),s?.subscription_status==="past_due"&&s?.grace_period_end&&e.jsx("div",{className:"mb-6",children:e.jsx(v,{gracePeriodEnd:s.grace_period_end})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:d,disabled:n,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition disabled:opacity-50",children:s?.subscription_status==="trial"?"Add Payment Method":"Update Payment Method"}),s?.subscription_status==="active"&&e.jsx("button",{onClick:i,disabled:n,className:"w-full px-6 py-3 border-2 border-red-300 text-red-600 rounded-lg font-semibold hover:bg-red-50 transition disabled:opacity-50",children:"Cancel Subscription"}),s?.subscription_status==="canceled"&&e.jsx("button",{onClick:c,disabled:n,className:"w-full px-6 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition disabled:opacity-50",children:"Reactivate Subscription"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Plan Features"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"text-slate-700",children:"Unlimited products and courses"})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"text-slate-700",children:"AI-powered store setup and copywriting"})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"text-slate-700",children:"Advanced analytics and recommendations"})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"text-slate-700",children:"Email marketing and DM campaigns"})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"text-slate-700",children:"Booking and calendar management"})]})]})]})]})})]})}export{C as default};
//# sourceMappingURL=Billing-xXlGVmfg.js.map
