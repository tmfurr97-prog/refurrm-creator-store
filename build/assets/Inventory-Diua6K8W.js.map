{"version":3,"file":"Inventory-Diua6K8W.js","sources":["../../src/pages/Inventory.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\nimport { Package, AlertTriangle, TrendingUp, TrendingDown } from 'lucide-react';\n\nexport default function Inventory() {\n  const [products, setProducts] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    loadProducts();\n  }, []);\n\n  const loadProducts = async () => {\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) return;\n\n    const { data, error } = await supabase\n      .from('products')\n      .select('*')\n      .eq('user_id', user.id)\n      .order('created_at', { ascending: false });\n\n    if (!error && data) {\n      setProducts(data);\n    }\n    setLoading(false);\n  };\n\n  const updateStock = async (productId: string, change: number) => {\n    const product = products.find(p => p.id === productId);\n    if (!product) return;\n\n    const newQuantity = Math.max(0, product.stock_quantity + change);\n\n    const { error } = await supabase\n      .from('products')\n      .update({ stock_quantity: newQuantity })\n      .eq('id', productId);\n\n    if (!error) {\n      await supabase.from('inventory_history').insert({\n        product_id: productId,\n        user_id: (await supabase.auth.getUser()).data.user?.id,\n        change_type: change > 0 ? 'increase' : 'decrease',\n        quantity_change: change,\n        previous_quantity: product.stock_quantity,\n        new_quantity: newQuantity,\n        notes: 'Manual adjustment'\n      });\n\n      toast({ title: 'Stock updated successfully' });\n      loadProducts();\n    }\n  };\n\n  const getStockStatus = (product: any) => {\n    if (!product.track_inventory) return { label: 'Not Tracked', variant: 'secondary' as const };\n    if (product.stock_quantity === 0) return { label: 'Out of Stock', variant: 'destructive' as const };\n    if (product.stock_quantity <= product.low_stock_threshold) return { label: 'Low Stock', variant: 'warning' as const };\n    return { label: 'In Stock', variant: 'default' as const };\n  };\n\n  if (loading) return <div className=\"p-8\">Loading...</div>;\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"flex justify-between items-center mb-8\">\n        <h1 className=\"text-3xl font-bold\">Inventory Management</h1>\n      </div>\n\n      <div className=\"grid gap-4\">\n        {products.map(product => {\n          const status = getStockStatus(product);\n          return (\n            <Card key={product.id} className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-4\">\n                  {product.image_url ? (\n                    <img src={product.image_url} alt={product.name} className=\"w-16 h-16 object-cover rounded\" />\n                  ) : (\n                    <div className=\"w-16 h-16 bg-gray-200 rounded flex items-center justify-center\">\n                      <Package className=\"w-8 h-8 text-gray-400\" />\n                    </div>\n                  )}\n                  <div>\n                    <h3 className=\"font-semibold text-lg\">{product.name}</h3>\n                    <p className=\"text-sm text-gray-500\">${product.price}</p>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center gap-6\">\n                  <div className=\"text-center\">\n                    <p className=\"text-sm text-gray-500 mb-1\">Current Stock</p>\n                    <p className=\"text-2xl font-bold\">{product.stock_quantity || 0}</p>\n                  </div>\n\n                  <Badge variant={status.variant}>{status.label}</Badge>\n\n                  {product.track_inventory && (\n                    <div className=\"flex gap-2\">\n                      <Button size=\"sm\" variant=\"outline\" onClick={() => updateStock(product.id, -1)}>\n                        <TrendingDown className=\"w-4 h-4\" />\n                      </Button>\n                      <Button size=\"sm\" variant=\"outline\" onClick={() => updateStock(product.id, 1)}>\n                        <TrendingUp className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </Card>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"names":["Inventory","products","setProducts","useState","loading","setLoading","toast","useToast","useEffect","loadProducts","user","supabase","data","error","updateStock","productId","change","product","p","newQuantity","getStockStatus","jsx","jsxs","status","Card","Package","Badge","Button","TrendingDown","TrendingUp"],"mappings":"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"}