import{r as t,j as e,O as J,ak as U,J as Z,Z as $}from"./react-vendor-zXfd7Ve7.js";import{s as l,B as i,C as p,L as a,I as n}from"./index-k1V3dZSG.js";import{R as K}from"./RichTextEditor-bmaH11TS.js";import{S as k,a as B,b as R,c as A,d as f}from"./select-C3Vw_1bu.js";import{G as S}from"./vendor-BOHFvtXa.js";import{T as M,a as Q,b as L,c,d as W,e as r}from"./table-Cg8Ddt1f.js";import"./ui-vendor-BrpyYz2q.js";import"./supabase-CH0YqYdn.js";import"./markdown-B2p_DnqW.js";function ce(){const[F,O]=t.useState([]),[b,C]=t.useState(null),[N,d]=t.useState(""),[y,o]=t.useState(""),[T,x]=t.useState(""),[_,h]=t.useState(""),[w,j]=t.useState(""),[E,u]=t.useState(""),[D,m]=t.useState("draft"),[V,q]=t.useState([]),[P,g]=t.useState("");t.useEffect(()=>{v(),z()},[]);const v=async()=>{const{data:s}=await l.from("blog_posts").select("*").order("created_at",{ascending:!1});O(s||[])},z=async()=>{const{data:s}=await l.from("blog_categories").select("*");q(s||[])},H=async()=>{const s={title:N,content:y,excerpt:T,featured_image:_,seo_title:w,seo_description:E,status:D,category_id:P||null};b?(await l.from("blog_posts").update(s).eq("id",b.id),S.success("Post updated")):(await l.from("blog_posts").insert(s),S.success("Post created")),I(),v()},I=()=>{C(null),d(""),o(""),x(""),h(""),j(""),u(""),m("draft"),g("")},G=async s=>{await l.from("blog_posts").delete().eq("id",s),S.success("Post deleted"),v()};return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Blog Admin"}),e.jsxs(i,{onClick:I,children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"New Post"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx(p,{className:"lg:col-span-2 p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{children:"Title"}),e.jsx(n,{value:N,onChange:s=>d(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Content"}),e.jsx(K,{value:y,onChange:o})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Excerpt"}),e.jsx(n,{value:T,onChange:s=>x(s.target.value)})]})]})}),e.jsx(p,{className:"p-6 h-fit",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{children:"Status"}),e.jsxs(k,{value:D,onValueChange:m,children:[e.jsx(B,{children:e.jsx(R,{})}),e.jsxs(A,{children:[e.jsx(f,{value:"draft",children:"Draft"}),e.jsx(f,{value:"published",children:"Published"})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Category"}),e.jsxs(k,{value:P,onValueChange:g,children:[e.jsx(B,{children:e.jsx(R,{placeholder:"Select"})}),e.jsx(A,{children:V.map(s=>e.jsx(f,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Featured Image URL"}),e.jsx(n,{value:_,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(a,{children:"SEO Title"}),e.jsx(n,{value:w,onChange:s=>j(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(a,{children:"SEO Description"}),e.jsx(n,{value:E,onChange:s=>u(s.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{onClick:H,className:"flex-1",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Save"]}),e.jsx(i,{variant:"outline",children:e.jsx(Z,{className:"h-4 w-4"})})]})]})})]}),e.jsxs(p,{className:"mt-6 p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"All Posts"}),e.jsxs(M,{children:[e.jsx(Q,{children:e.jsxs(L,{children:[e.jsx(c,{children:"Title"}),e.jsx(c,{children:"Status"}),e.jsx(c,{children:"Date"}),e.jsx(c,{children:"Actions"})]})}),e.jsx(W,{children:F.map(s=>e.jsxs(L,{children:[e.jsx(r,{children:s.title}),e.jsx(r,{children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status})}),e.jsx(r,{children:new Date(s.created_at).toLocaleDateString()}),e.jsxs(r,{className:"flex gap-2",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>{C(s),d(s.title),o(s.content),x(s.excerpt),h(s.featured_image),j(s.seo_title),u(s.seo_description),m(s.status),g(s.category_id)},children:"Edit"}),e.jsx(i,{size:"sm",variant:"destructive",onClick:()=>G(s.id),children:e.jsx($,{className:"h-4 w-4"})})]})]},s.id))})]})]})]})}export{ce as default};
//# sourceMappingURL=BlogAdmin-CCFxyaNn.js.map
