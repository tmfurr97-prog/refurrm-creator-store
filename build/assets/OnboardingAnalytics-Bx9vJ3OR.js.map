{"version":3,"file":"OnboardingAnalytics-Bx9vJ3OR.js","sources":["../../src/pages/OnboardingAnalytics.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, PieChart, Pie, Cell } from 'recharts';\nimport { Users, TrendingUp, Clock, AlertCircle } from 'lucide-react';\n\nexport default function OnboardingAnalytics() {\n  const [analytics, setAnalytics] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadAnalytics();\n  }, []);\n\n  const loadAnalytics = async () => {\n    const { data } = await supabase.from('onboarding_analytics').select('*');\n    \n    const stepStats = data?.reduce((acc: any, curr: any) => {\n      if (!acc[curr.step_name]) {\n        acc[curr.step_name] = { total: 0, completed: 0, avgTime: 0 };\n      }\n      acc[curr.step_name].total++;\n      if (curr.completed) acc[curr.step_name].completed++;\n      if (curr.time_spent_seconds) {\n        acc[curr.step_name].avgTime += curr.time_spent_seconds;\n      }\n      return acc;\n    }, {});\n\n    const chartData = Object.entries(stepStats || {}).map(([name, stats]: any) => ({\n      name,\n      completion: Math.round((stats.completed / stats.total) * 100),\n      avgTime: Math.round(stats.avgTime / stats.total / 60)\n    }));\n\n    setAnalytics({ stepStats, chartData, totalUsers: data?.length || 0 });\n    setLoading(false);\n  };\n\n  const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884D8'];\n\n  if (loading) return <div className=\"p-8\">Loading analytics...</div>;\n\n  return (\n    <div className=\"container mx-auto py-8 px-4\">\n      <h1 className=\"text-4xl font-bold mb-8\">Onboarding Analytics</h1>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Users</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{analytics?.totalUsers || 0}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Step Completion Rates</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <BarChart data={analytics?.chartData || []}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"name\" />\n                <YAxis />\n                <Tooltip />\n                <Bar dataKey=\"completion\" fill=\"#8884d8\" />\n              </BarChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Average Time per Step (minutes)</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <BarChart data={analytics?.chartData || []}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"name\" />\n                <YAxis />\n                <Tooltip />\n                <Bar dataKey=\"avgTime\" fill=\"#82ca9d\" />\n              </BarChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n"],"names":["OnboardingAnalytics","analytics","setAnalytics","useState","loading","setLoading","useEffect","loadAnalytics","data","supabase","stepStats","acc","curr","chartData","name","stats","jsx","jsxs","Card","CardHeader","CardTitle","Users","CardContent","ResponsiveContainer","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","Bar"],"mappings":"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"}