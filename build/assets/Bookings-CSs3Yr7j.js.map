{"version":3,"file":"Bookings-CSs3Yr7j.js","sources":["../../src/pages/Bookings.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { useAuth } from '@/contexts/AuthContext';\nimport DashboardNav from '@/components/DashboardNav';\n\nexport default function Bookings() {\n  const { user } = useAuth();\n  const [bookings, setBookings] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadBookings();\n  }, [user]);\n\n  const loadBookings = async () => {\n    if (!user) return;\n\n    const { data: shopData } = await supabase\n      .from('shops')\n      .select('id')\n      .eq('user_id', user.id)\n      .single();\n\n    if (shopData) {\n      const { data: productsData } = await supabase\n        .from('products')\n        .select('id')\n        .eq('shop_id', shopData.id)\n        .eq('type', 'service');\n\n      const productIds = productsData?.map(p => p.id) || [];\n\n      if (productIds.length > 0) {\n        const { data } = await supabase\n          .from('bookings')\n          .select('*, products(name)')\n          .in('product_id', productIds)\n          .order('scheduled_at', { ascending: true });\n\n        setBookings(data || []);\n      }\n    }\n\n    setLoading(false);\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleString('en-US', {\n      weekday: 'short',\n      month: 'short',\n      day: 'numeric',\n      hour: 'numeric',\n      minute: '2-digit'\n    });\n  };\n\n  return (\n    <div className=\"flex min-h-screen bg-slate-50\">\n      <DashboardNav />\n      \n      <div className=\"flex-1 p-8\">\n        <div className=\"max-w-6xl mx-auto\">\n          <h2 className=\"text-3xl font-bold text-slate-900 mb-8\">Bookings</h2>\n\n          {loading ? (\n            <p className=\"text-slate-600\">Loading bookings...</p>\n          ) : bookings.length === 0 ? (\n            <div className=\"bg-white rounded-lg shadow p-12 text-center\">\n              <p className=\"text-slate-600 mb-4\">No bookings yet.</p>\n              <p className=\"text-sm text-slate-500\">Create a service product to start accepting bookings.</p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {bookings.map(booking => (\n                <div key={booking.id} className=\"bg-white rounded-lg shadow p-6\">\n                  <div className=\"flex justify-between items-start\">\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-slate-900\">\n                        {booking.products?.name}\n                      </h3>\n                      <p className=\"text-slate-600 mt-1\">{booking.customer_name} ({booking.customer_email})</p>\n                      <p className=\"text-sm text-slate-500 mt-2\">{formatDate(booking.scheduled_at)}</p>\n                      <p className=\"text-sm text-slate-500\">{booking.duration_minutes} minutes</p>\n                      \n                      {booking.prep_notes && (\n                        <div className=\"mt-4 p-3 bg-slate-50 rounded\">\n                          <p className=\"text-sm font-medium text-slate-700 mb-1\">Client Notes:</p>\n                          <p className=\"text-sm text-slate-600\">{booking.prep_notes}</p>\n                        </div>\n                      )}\n\n                      {booking.ai_brief && (\n                        <div className=\"mt-3 p-3 bg-purple-50 rounded\">\n                          <p className=\"text-sm font-medium text-purple-900 mb-1\">AI Brief:</p>\n                          <p className=\"text-sm text-purple-700\">{booking.ai_brief}</p>\n                        </div>\n                      )}\n                    </div>\n                    \n                    <span className={`px-3 py-1 rounded text-sm ${\n                      booking.status === 'scheduled' ? 'bg-green-100 text-green-700' :\n                      booking.status === 'completed' ? 'bg-slate-100 text-slate-600' :\n                      'bg-red-100 text-red-700'\n                    }`}>\n                      {booking.status}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["Bookings","user","useAuth","bookings","setBookings","useState","loading","setLoading","useEffect","loadBookings","shopData","supabase","productsData","productIds","p","data","formatDate","dateString","jsxs","jsx","DashboardNav","booking"],"mappings":"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"}