import{r as l,j as e,o as b,Z as w,ak as S}from"./react-vendor-zXfd7Ve7.js";import{s as r,B as d,C as u,I as x,T as h,h as k}from"./index-D8webL0o.js";import{D as E}from"./DashboardNav-ZSGo2elE.js";import{G as o}from"./vendor-BOHFvtXa.js";import"./ui-vendor-BrpyYz2q.js";import"./supabase-CH0YqYdn.js";function P(){const[i,p]=l.useState([]),[a,c]=l.useState(null),[f,j]=l.useState([]),[I,_]=l.useState([]),[g,m]=l.useState(!1);l.useEffect(()=>{n(),v()},[]);const n=async()=>{const{data:s}=await r.from("collections").select("*").order("created_at",{ascending:!1});s&&p(s)},v=async()=>{const{data:s}=await r.from("products").select("*");s&&j(s)},C=async()=>{m(!0);try{const{data:s,error:t}=await r.functions.invoke("ai-collection-organizer",{body:{products:f}});if(t)throw t;o.success("AI collections generated!"),n()}catch(s){o.error(s.message)}finally{m(!1)}},N=async()=>{if(!a)return;const{error:s}=await r.from("collections").upsert(a);s?o.error(s.message):(o.success("Collection saved!"),n())},y=async s=>{const{error:t}=await r.from("collections").delete().eq("id",s);t?o.error(t.message):(o.success("Collection deleted!"),n())};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Collection Manager"}),e.jsxs(d,{onClick:C,disabled:g,children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Generate AI Collections"]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"space-y-4",children:i.map(s=>e.jsx(u,{className:"p-4 cursor-pointer hover:border-primary",onClick:()=>c(s),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.theme})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),y(s.id)},children:e.jsx(w,{className:"w-4 h-4"})})]})},s.id))}),a&&e.jsx("div",{className:"md:col-span-2 space-y-4",children:e.jsxs(u,{className:"p-6",children:[e.jsx(x,{value:a.name,onChange:s=>c({...a,name:s.target.value}),placeholder:"Collection Name",className:"mb-4"}),e.jsx(h,{value:a.description,onChange:s=>c({...a,description:s.target.value}),placeholder:"Description",className:"mb-4"}),e.jsx(x,{value:a.seo_title,onChange:s=>c({...a,seo_title:s.target.value}),placeholder:"SEO Title",className:"mb-4"}),e.jsx(h,{value:a.seo_description,onChange:s=>c({...a,seo_description:s.target.value}),placeholder:"SEO Description",className:"mb-4"}),e.jsxs(d,{onClick:N,children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Save Collection"]})]})})]})]})}function O(){const{user:i}=k();return i?e.jsxs("div",{className:"flex min-h-screen bg-slate-50",children:[e.jsx(E,{}),e.jsx("div",{className:"flex-1 p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(P,{})})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{className:"text-lg",children:"Please log in to manage collections."})})}export{O as default};
//# sourceMappingURL=Collections-DczROMlA.js.map
