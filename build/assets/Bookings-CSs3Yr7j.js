import{r,j as e}from"./react-vendor-zXfd7Ve7.js";import{h as u,s as d}from"./index-k1V3dZSG.js";import{D as h}from"./DashboardNav-dXlKSIlC.js";import"./vendor-BOHFvtXa.js";import"./ui-vendor-BrpyYz2q.js";import"./supabase-CH0YqYdn.js";function _(){const{user:t}=u(),[l,c]=r.useState([]),[n,m]=r.useState(!0);r.useEffect(()=>{o()},[t]);const o=async()=>{if(!t)return;const{data:s}=await d.from("shops").select("id").eq("user_id",t.id).single();if(s){const{data:p}=await d.from("products").select("id").eq("shop_id",s.id).eq("type","service"),i=p?.map(a=>a.id)||[];if(i.length>0){const{data:a}=await d.from("bookings").select("*, products(name)").in("product_id",i).order("scheduled_at",{ascending:!0});c(a||[])}}m(!1)},x=s=>new Date(s).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return e.jsxs("div",{className:"flex min-h-screen bg-slate-50",children:[e.jsx(h,{}),e.jsx("div",{className:"flex-1 p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-8",children:"Bookings"}),n?e.jsx("p",{className:"text-slate-600",children:"Loading bookings..."}):l.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx("p",{className:"text-slate-600 mb-4",children:"No bookings yet."}),e.jsx("p",{className:"text-sm text-slate-500",children:"Create a service product to start accepting bookings."})]}):e.jsx("div",{className:"space-y-4",children:l.map(s=>e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:s.products?.name}),e.jsxs("p",{className:"text-slate-600 mt-1",children:[s.customer_name," (",s.customer_email,")"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:x(s.scheduled_at)}),e.jsxs("p",{className:"text-sm text-slate-500",children:[s.duration_minutes," minutes"]}),s.prep_notes&&e.jsxs("div",{className:"mt-4 p-3 bg-slate-50 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-1",children:"Client Notes:"}),e.jsx("p",{className:"text-sm text-slate-600",children:s.prep_notes})]}),s.ai_brief&&e.jsxs("div",{className:"mt-3 p-3 bg-pale skin-50 rounded",children:[e.jsx("p",{className:"text-sm font-medium text-pale skin-900 mb-1",children:"AI Brief:"}),e.jsx("p",{className:"text-sm text-pale skin-700",children:s.ai_brief})]})]}),e.jsx("span",{className:`px-3 py-1 rounded text-sm ${s.status==="scheduled"?"bg-green-100 text-green-700":s.status==="completed"?"bg-slate-100 text-slate-600":"bg-red-100 text-red-700"}`,children:s.status})]})},s.id))})]})})]})}export{_ as default};
//# sourceMappingURL=Bookings-CSs3Yr7j.js.map
