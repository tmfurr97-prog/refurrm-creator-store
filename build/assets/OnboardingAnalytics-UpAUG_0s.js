import{r as i,j as e,ag as T}from"./react-vendor-zXfd7Ve7.js";import{s as _,C as n,a as l,b as d,c as r}from"./index-k1V3dZSG.js";import{R as m,J as x,H as h,X as j,Y as p,T as g,K as f}from"./vendor-BOHFvtXa.js";import"./ui-vendor-BrpyYz2q.js";import"./supabase-CH0YqYdn.js";function S(){const[t,y]=i.useState(null),[u,b]=i.useState(!0);i.useEffect(()=>{v()},[]);const v=async()=>{const{data:o}=await _.from("onboarding_analytics").select("*"),c=o?.reduce((a,s)=>(a[s.step_name]||(a[s.step_name]={total:0,completed:0,avgTime:0}),a[s.step_name].total++,s.completed&&a[s.step_name].completed++,s.time_spent_seconds&&(a[s.step_name].avgTime+=s.time_spent_seconds),a),{}),C=Object.entries(c||{}).map(([a,s])=>({name:a,completion:Math.round(s.completed/s.total*100),avgTime:Math.round(s.avgTime/s.total/60)}));y({stepStats:c,chartData:C,totalUsers:o?.length||0}),b(!1)};return u?e.jsx("div",{className:"p-8",children:"Loading analytics..."}):e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Onboarding Analytics"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:e.jsxs(n,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold",children:t?.totalUsers||0})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{children:[e.jsx(l,{children:e.jsx(d,{children:"Step Completion Rates"})}),e.jsx(r,{children:e.jsx(m,{width:"100%",height:300,children:e.jsxs(x,{data:t?.chartData||[],children:[e.jsx(h,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"name"}),e.jsx(p,{}),e.jsx(g,{}),e.jsx(f,{dataKey:"completion",fill:"#8884d8"})]})})})]}),e.jsxs(n,{children:[e.jsx(l,{children:e.jsx(d,{children:"Average Time per Step (minutes)"})}),e.jsx(r,{children:e.jsx(m,{width:"100%",height:300,children:e.jsxs(x,{data:t?.chartData||[],children:[e.jsx(h,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"name"}),e.jsx(p,{}),e.jsx(g,{}),e.jsx(f,{dataKey:"avgTime",fill:"#82ca9d"})]})})})]})]})]})}export{S as default};
//# sourceMappingURL=OnboardingAnalytics-UpAUG_0s.js.map
