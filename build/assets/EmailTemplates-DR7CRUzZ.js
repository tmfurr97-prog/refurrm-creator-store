import{r as n,j as e}from"./react-vendor-zXfd7Ve7.js";import{h as T,s as d,C as p,B as r,L as c,I as u,T as C}from"./index-k1V3dZSG.js";import{S,a as y,b as k,c as E,d as o}from"./select-C3Vw_1bu.js";import{D}from"./DashboardNav-dXlKSIlC.js";import"./vendor-BOHFvtXa.js";import"./ui-vendor-BrpyYz2q.js";import"./supabase-CH0YqYdn.js";function V(){const{user:a}=T(),[j,g]=n.useState([]),[x,m]=n.useState(null),[v,i]=n.useState(!1),[s,l]=n.useState({name:"",subject:"",template_type:"welcome",html_content:"",text_content:""});n.useEffect(()=>{h()},[]);const h=async()=>{const{data:t}=await d.from("email_templates").select("*").order("created_at",{ascending:!1});t&&g(t)},b=async()=>{x?await d.from("email_templates").update(s).eq("id",x.id):await d.from("email_templates").insert({...s,created_by:a?.id}),h(),i(!1),m(null)},f=async()=>{if(!a?.email)return;let t=s.html_content;t=t.replace(/{{name}}/g,a.user_metadata?.full_name||"Customer"),t=t.replace(/{{email}}/g,a.email),t=t.replace(/{{product}}/g,"Sample Product"),t=t.replace(/{{order_id}}/g,"#12345"),t=t.replace(/{{amount}}/g,"$99.99"),t=t.replace(/{{link}}/g,"https://example.com"),console.log("Test email would be sent to:",a.email),console.log("Content:",t),alert(`Test email preview:

To: ${a.email}
Subject: ${s.subject}

Content has been logged to console.`)},_=t=>{l({...s,html_content:s.html_content+" "+t})},N=t=>{m(t),l({name:t.name,subject:t.subject,template_type:t.template_type,html_content:t.html_content,text_content:t.text_content}),i(!0)},w=["{{name}}","{{email}}","{{product}}","{{order_id}}","{{amount}}","{{link}}"];return e.jsxs("div",{className:"min-h-screen bg-slate-900",children:[e.jsx(D,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsx("h1",{className:"text-4xl font-black text-white mb-8",children:"Email Templates"}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs(p,{className:"lg:col-span-1 bg-slate-800 border-slate-700 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Templates"}),e.jsx(r,{onClick:()=>{i(!0),m(null)},size:"sm",children:"New"})]}),e.jsx("div",{className:"space-y-2",children:j.map(t=>e.jsxs("div",{onClick:()=>N(t),className:"p-3 bg-slate-700 rounded cursor-pointer hover:bg-slate-600",children:[e.jsx("div",{className:"font-semibold text-white",children:t.name}),e.jsx("div",{className:"text-sm text-slate-400",children:t.template_type})]},t.id))})]}),e.jsx(p,{className:"lg:col-span-2 bg-slate-800 border-slate-700 p-6",children:v?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{className:"text-white",children:"Template Name"}),e.jsx(u,{value:s.name,onChange:t=>l({...s,name:t.target.value})})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-white",children:"Type"}),e.jsxs(S,{value:s.template_type,onValueChange:t=>l({...s,template_type:t}),children:[e.jsx(y,{children:e.jsx(k,{})}),e.jsxs(E,{children:[e.jsx(o,{value:"welcome",children:"Welcome"}),e.jsx(o,{value:"password_reset",children:"Password Reset"}),e.jsx(o,{value:"order_confirmation",children:"Order Confirmation"}),e.jsx(o,{value:"trial_reminder",children:"Trial Reminder"})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-white",children:"Subject"}),e.jsx(u,{value:s.subject,onChange:t=>l({...s,subject:t.target.value})})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-white",children:"HTML Content"}),e.jsx(C,{rows:8,value:s.html_content,onChange:t=>l({...s,html_content:t.target.value})})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-white",children:"Merge Tags (click to insert)"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:w.map(t=>e.jsx("button",{onClick:()=>_(t),className:"px-2 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 cursor-pointer",children:t},t))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{onClick:b,children:"Save Template"}),e.jsx(r,{variant:"outline",onClick:f,children:"Send Test Email"}),e.jsx(r,{variant:"outline",onClick:()=>i(!1),children:"Cancel"})]})]}):e.jsx("div",{className:"text-center text-slate-400 py-12",children:"Select or create a template"})})]})]})]})}export{V as default};
//# sourceMappingURL=EmailTemplates-DR7CRUzZ.js.map
